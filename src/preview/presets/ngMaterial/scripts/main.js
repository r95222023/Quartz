!function(){"use strict";angular.module("quartz.components",["ui.router","pascalprecht.translate"])}(),function(){"use strict";function t(){var t=0;window._FBUsg=this,this.useBandwidth=function(e){t+=angular.isNumber(e)?e:encodeURI(JSON.stringify(e)).split(/%..|./).length-1,console.log("usage:",t)}}angular.module("quartz.components").service("$usage",t)}(),function(){"use strict";function t(t){function e(t){var e={},n=t||{};return _core.util.siteName&&(e.siteName=_core.util.siteName),n.params?n.params=Object.assign(e,n.params):n=Object.assign(e,n),n}function n(t,n){return _core.util.storage.getWithCache(t,e(n))}function r(t,n,r,a){return _core.util.storage.update(t,n,r,e(a))}function a(t,n){return _core.util.storage.ref(t,e(n))}function i(t){return Array.isArray(t)?t[Math.floor(Math.random()*t.length)]:t}function o(t,e,n,r,o){return new Promise(function(u,s){var c="function"==typeof o?o:function(){},l="function"==typeof r?r:function(){},d=a(t,{isJs:!1}),m=a(e,{isJs:!1});d.getMetadata().then(function(t){var e=i(t.downloadURLs),r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",l(t),r.onload=function(){if(200==this.status){var e=new window.Blob([r.response],{type:t.contentType});m.put(e).on("state_changed",c,s,function(){n&&d.delete(),u()}),u()}},r.addEventListener("error",function(){s("GET error:"+r.status)}),r.send()})})}function u(t,e){return a(t,e).delete()}function s(){for(var t in f)delete f[t].load}function c(t,e){return f[t]=f[t]||{},"loaded"===f[t].load?f[t].val:void("loading"!==f[t].load&&(f[t].load="loading",n(t).then(function(n){f[t]={val:"function"==typeof e?e(n):n,load:"loaded"}})))}function l(t){var e=t+"",n=/url\(['"][\s\S]*?['"]\)/gm,r=e.match(n)||[],a=[];return r.forEach(function(t,e){var n=t.match(/url\(['"]?([\s\S]*?)["']?\)/m)[1];n=n.replace("../",""),a[e]=-1===t.search("//")?m.ref("file-path?path="+n).getDownloadURL():Promise.resolve(n)}),new Promise(function(n,i){r.length?Promise.all(a).then(function(t){t.forEach(function(n,a){e=e.replace(r[a],"url('"+t[a]+"')")}),n(e)}).catch(i):n(t)})}function d(t){var e=new FileReader;return new Promise(function(n){e.addEventListener("loadend",function(e){l(e.srcElement.result).then(function(r){if(r===e.srcElement.result)n(t);else{var a=new Blob([r],{type:"text/css"});n(a)}}).catch(function(e){console.log(e),n(t)})}),e.readAsText(t)})}var m={get:c,getWithCache:n,copy:o,update:r,remove:u,ref:a,getSingleDownloadUrl:i,clearTemp:s,fixCSSFile:d,storages:{}},f={};return window._getFBS=function(e){window._getGetFBS()(e,function(){t(angular.noop,0)})},m}t.$inject=["$timeout"],angular.module("quartz.components").factory("$firebaseStorage",t)}(),function(){"use strict";function t(){function t(t,e){for(var n=t.length;n--;)t[n]===e&&t.splice(n,1)}function e(t){function e(t){var e=Number(t);return!e%1===0&&e>-1?e:!1}function n(t){var r=[],a={},i=!0;return angular.forEach(t,function(t,a){var o=e(a);return o===!1?(i=!1,!1):void(r[a]=angular.isObject(t)?n(t):t)}),i===!1&&angular.forEach(t,function(t,e){a[e]=angular.isObject(t)?n(t):t}),i?r:a}return n(t)}function n(t,e,n){var r;return function(){var a=this,i=arguments,o=function(){r=null,n||t.apply(a,i)},u=n&&!r;clearTimeout(r),r=setTimeout(o,e),u&&t.apply(a,i)}}function r(t){var e=JSON.stringify(t).replace("undefined","null");return JSON.parse(e)}function a(t){return 10>t?"0"+t:t}function i(t,e,n){var r=document.createElement("a"),a=t;document.body.appendChild(r),r.style="display: none",""===e.split(".json")[1]&&(a=JSON.stringify(t));var i=new Blob([a],{type:n||"text/plain"}),o=window.URL.createObjectURL(i);r.href=o,r.download=e,r.click(),window.URL.revokeObjectURL(o)}function o(t,e){var n=document.createElement("a");e&&(n.download=e),n.href=t,n.click()}function u(t,e){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n.response)},n.open("GET",t),n.send()}function s(t,e,n){var r=n||"";t&&t._content?angular.forEach(t._content,function(n,a){"__created"!==a&&s(t[a]||n,e,r+"/"+n.name)}):e(t,r)}return{debounce:n,to2dig:a,saveData:i,downloadURI:o,toDataUrl:u,getFirebaseArrayData:e,removeItemFromArray:t,rectifyUpdateData:r,iterateFileTree:s}}angular.module("quartz.components").factory("snippets",t)}(),function(){"use strict";function t(t,e,n,r,a){function i(t){return t.trim().replace(".","_")}function o(e,n){var r=i(e);t.queryRef("my-sites?uid="+n).push({siteName:r,createdTime:firebase.database.ServerValue.TIMESTAMP}).then(function(){t.update(["site?type=detail","site?type=list"],{"author@1":n,"siteName@1":r,createdTime:firebase.database.ServerValue.TIMESTAMP},{siteName:r}),a.add("record","created",{siteName:r},r)})}function u(a,i){var o=r.defer(),u=this,s="sites/detail/"+a+"/",c="sites/detail/"+(i||u.siteName)+"/",l=i||u.siteName,d=["products","articles","pages","widgets"],m={products:"itemId",articles:"id"},f={};return angular.forEach(d,function(e){f[e]=t.getFileTableFromList(e+"?type=list&siteName="+a,{fileName:m[e]||"name"})}),f.files=t.queryRef("files?siteName="+a).once("value"),r.all(f).then(function(i){var u=[],m=function(t,n){u.push(e.copy(s+n,c+n))};console.log(i),angular.forEach(d,function(e){n.iterateFileTree({_content:i[e]},m,e+"/detail"),u.push(t.copy(e+"?type=list&siteName="+a,e+"?type=list&siteName="+l)),u.push(t.copy(e+"?type=config&siteName="+a,e+"?type=config&siteName="+l))}),n.iterateFileTree(i.files.val(),m,"files"),u.push(t.copy("files?siteName="+a,"files?siteName="+l)),u.push(e.copy(s+"config/preload",c+"config/preload")),r.all(u).then(o.resolve)}),o.promise}function s(e,n){t.queryRef("my-sites?uid="+n).orderByChild("siteName").equalTo(e).once("child_added",function(t){t.ref.set(null)}),t.update(["site?type=detail","site?type=list"],{"@all":null},{siteName:e}),a.remove(!1,!1,e)}this.setTitle=function(t){document.title=t},this.siteName="default",this.addSite=o,this.moveSite=u,this.removeSite=s}function e(t,e,n,r,a,i,o,u,s){function c(e,n,r){if(_core.util.setSiteName(e),u.siteName!==e||r){console.log("Initializing "+e),a.$broadcast("site:change",e),u.setTitle(e),u.siteName=e,u.config={},u.preLoading=!0;var i=t.defer();u.onReady=function(){return i.promise},"customPage"===n.name||"previewFrame"===n.name?l(i.resolve,i.reject):i.resolve(u)}}function l(t){s.getWithCache("site-config-preload").then(function(e){var r=e||{};console.log(e),n.loadSite(r).then(function(){if(u.config=r,r.title&&_core.siteUtil.changeTitle(r.title),r.favicon){var e=r.favicon;-1!==r.favicon.search("//")?_core.siteUtil.changeFavicon(e):s.ref("file-path?path="+e,{isJs:!1}).getDownloadURL().then(function(t){_core.siteUtil.changeFavicon(t)})}delete u.preLoading,a.sitesService=u,t(u)})})}function d(t){var e=t.name;return""!==e&&(-1!==e.search(".admin")||"pageEditor"===e||"widgetEditor"===e)}function m(t){return-1!==t.name.search("customPage")}r.standAlone||i.onBefore({to:"**"},function(t){var n=t.to(),r=t.from(),a=t.params("to");a.siteName?c(a.siteName,n):""===a.siteName&&_core.util.siteName&&o.go(n.name,Object.assign(a,{siteName:_core.util.siteName})),d(r)&&m(n)?c(a.siteName,n,!0):m(r)&&d(n)&&(console.log("reloading"),e.location.reload()),u.pageName=a.pageName})}t.$inject=["$firebase","$firebaseStorage","snippets","$q","indexService"],e.$inject=["$q","$window","$lazyLoad","config","$rootScope","$transitions","$state","sitesService","$firebaseStorage"],angular.module("quartz.components").service("sitesService",t).run(e)}(),function(){angular.module("quartz.components").config(["$provide",function(t){t.decorator("ngCloakDirective",["$delegate","$auth",function(t,e){var n=t[0],r=n.compile;return n.compile=function(t,a){e.waitForAuth().then(function(){r.call(n,t,a)})},t}])}])}(),function(){"use strict";var t=[];angular.module("quartz.components").config(["$stateProvider",function(e){e.stateAuthenticated=function(n,r){return t.push(n),r.resolve=r.resolve||{},r.resolve.authData=["$auth",function(t){return t.requireAuth()}],e.state(n,r),this}}]).run(["$rootScope","$transitions","$location","$state","$auth","config",function(e,n,r,a,i,o){function u(t){!t&&s(a.current.name)&&(console.log("check failed",t,r.path()),a.go(o.loginRedirectState))}function s(e){return console.log("authRequired?",e,t.indexOf(e)),-1!==t.indexOf(e)}i.onAuthStateChanged(u),n.onError({to:"**"},function(t){"AUTH_REQUIRED"===t.error()&&a.transitionTo(o.loginRedirectState)})}])}(),function(){"use strict";function t(t){function e(t,e,n,r){return a("add",r||!1,t,e,n)}function n(t,e,n,r){return a("update",r||!1,t,e,n)}function r(t,e,n){return a("remove",n||!1,t,e)}function a(e,n,r,a,i){if(!n&&!_core.util.siteName)return void console.log("Please select a site or enter an index");var o={_state:"index"};return o.index="string"==typeof n?n:_core.util.siteName,angular.isString(e)&&(o.task=e),angular.isString(r)&&(o.type=r),angular.isString(a)&&(o.id=a),i&&(o.body=i),t.queryRef("queue-tasks").push(o)}return{add:e,update:n,remove:r}}t.$inject=["$firebase"],angular.module("quartz.components").service("indexService",t)}(),function(){"use strict";angular.module("quartz.components").provider("Keepalive",function(){var t={http:null,interval:600};this.http=function(e){if(!e)throw new Error("Argument must be a string containing a URL, or an object containing the HTTP request configuration.");angular.isString(e)&&(e={url:e,method:"GET"}),e.cache=!1,t.http=e};var e=this.interval=function(e){if(e=parseInt(e),isNaN(e)||0>=e)throw new Error("Interval must be expressed in seconds and be greater than 0.");t.interval=e};this.$get=["$rootScope","$log","$interval","$http",function(n,r,a,i){function o(t,e){n.$broadcast("KeepaliveResponse",t,e)}function u(){n.$broadcast("Keepalive"),angular.isObject(t.http)&&i(t.http).success(o).error(o)}var s={ping:null};return{_options:function(){return t},setInterval:e,start:function(){return a.cancel(s.ping),s.ping=a(u,1e3*t.interval),s.ping},stop:function(){a.cancel(s.ping)},ping:function(){u()}}}]}).provider("Idle",function(){var t={idle:1200,timeout:30,autoResume:"idle",interrupt:"mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove scroll",keepalive:!0},e=this.timeout=function(e){if(e===!1)t.timeout=0;else{if(!(angular.isNumber(e)&&e>=0))throw new Error("Timeout must be zero or false to disable the feature, or a positive integer (in seconds) to enable it.");t.timeout=e}};this.interrupt=function(e){t.interrupt=e};var n=this.idle=function(e){if(0>=e)throw new Error("Idle must be a value in seconds, greater than 0.");t.idle=e};this.autoResume=function(e){t.autoResume=e===!0?"idle":e===!1?"off":e},this.keepalive=function(e){t.keepalive=e===!0},this.$get=["$interval","$log","$rootScope","$document","Keepalive","IdleLocalStorage","$window",function(r,a,i,o,u,s,c){function l(){t.keepalive&&(y.running&&u.ping(),u.start())}function d(){t.keepalive&&u.stop()}function m(){y.idling=!y.idling;var e=y.idling?"Start":"End";i.$broadcast("Idle"+e),y.idling?(d(),t.timeout&&(y.countdown=t.timeout,f(),y.timeout=r(f,1e3,t.timeout,!1))):l(),r.cancel(y.idle)}function f(){return y.countdown<=0?void p():(i.$broadcast("IdleWarn",y.countdown),void y.countdown--)}function p(){d(),r.cancel(y.idle),r.cancel(y.timeout),y.idling=!0,y.running=!1,y.countdown=0,i.$broadcast("IdleTimeout")}function g(t,e,n){var r=t.running();t.unwatch(),e(n),r&&t.watch()}function h(){var t=s.get("expiry");return t&&t.time?new Date(t.time):null}function v(t){t?s.set("expiry",{id:b,time:t}):s.remove("expiry")}var y={idle:null,timeout:null,idling:!1,running:!1,countdown:null},b=(new Date).getTime(),$={_options:function(){return t},_getNow:function(){return new Date},getIdle:function(){return t.idle},getTimeout:function(){return t.timeout},setIdle:function(t){g(this,n,t)},setTimeout:function(t){g(this,e,t)},isExpired:function(){var t=h();return null!==t&&t<=this._getNow()},running:function(){return y.running},idling:function(){return y.idling},watch:function(e){r.cancel(y.idle),r.cancel(y.timeout);var n=t.timeout?t.timeout:0;e||v(new Date((new Date).getTime()+1e3*(t.idle+n))),y.idling?m():y.running||l(),y.running=!0,y.idle=r(m,1e3*t.idle,0,!1)},unwatch:function(){r.cancel(y.idle),r.cancel(y.timeout),y.idling=!1,y.running=!1,v(null),d()},interrupt:function(e){return y.running?t.timeout&&this.isExpired()?void p():void(("idle"===t.autoResume||"notIdle"===t.autoResume&&!y.idling)&&this.watch(e)):void 0}};o.find("html").on(t.interrupt,function(t){"mousemove"===t.type&&t.originalEvent&&0===t.originalEvent.movementX&&0===t.originalEvent.movementY||("mousemove"!==t.type||angular.isUndefined(t.movementX)||t.movementX||t.movementY)&&$.interrupt()});var w=function(t){if("ngIdle.expiry"===t.key&&t.newValue&&t.newValue!==t.oldValue){var e=angular.fromJson(t.newValue);if(e.id===b)return;$.interrupt(!0)}};return c.addEventListener?c.addEventListener("storage",w,!1):c.attachEvent("onstorage",w),$}]}).provider("Title",function(){function t(t,e,n){return new Array(e-String(t).length+1).join(n||"0")+t}var e={enabled:!0},n=this.enabled=function(t){e.enabled=t===!0};this.$get=["$document","$interpolate",function(r,a){var i={original:null,idle:"{{minutes}}:{{seconds}} until your session times out!",timedout:"Your session has expired."};return{setEnabled:n,isEnabled:function(){return e.enabled},original:function(t){return angular.isUndefined(t)?i.original:void(i.original=t)},store:function(t){(t||!i.original)&&(i.original=this.value())},value:function(t){return angular.isUndefined(t)?r[0].title:void(r[0].title=t)},idleMessage:function(t){return angular.isUndefined(t)?i.idle:void(i.idle=t)},timedOutMessage:function(t){return angular.isUndefined(t)?i.timedout:void(i.timedout=t)},setAsIdle:function(e){this.store();var n={totalSeconds:e};n.minutes=Math.floor(e/60),n.seconds=t(e-60*n.minutes,2),this.value(a(this.idleMessage())(n))},setAsTimedOut:function(){this.store(),this.value(this.timedOutMessage())},restore:function(){this.original()&&this.value(this.original())}}}]}).service("IdleStorageAccessor",["$window",function(t){return{get:function(){return t.localStorage}}}]).service("IdleLocalStorage",["IdleStorageAccessor",function(t){function e(){var t={};this.setItem=function(e,n){t[e]=n},this.getItem=function(e){return"undefined"!=typeof t[e]?t[e]:null},this.removeItem=function(e){t[e]=void 0}}function n(){try{var n=t.get();return n.setItem("ngIdleStorage",""),n.removeItem("ngIdleStorage"),n}catch(r){return new e}}var r=n();return{set:function(t,e){r.setItem("ngIdle."+t,angular.toJson(e))},get:function(t){return angular.fromJson(r.getItem("ngIdle."+t))},remove:function(t){r.removeItem("ngIdle."+t)},_wrapped:function(){return r}}}]).run(["$rootScope","Idle",function(t,e){t.$on("IdleStart",function(){console.log("idle start")}),t.$on("IdleEnd",function(){console.log("idle end")}),t.user&&t.user.admin||e.watch()}])}(),function(){"use strict";angular.module("quartz.components").directive("idleCountdown",["Idle",function(t){return{restrict:"A",scope:{value:"=idleCountdown"},link:function(e){e.value=t.getTimeout(),e.$on("IdleWarn",function(t,n){e.$evalAsync(function(){e.value=n})}),e.$on("IdleTimeout",function(){e.$evalAsync(function(){e.value=0})})}}}]).directive("title",["Title",function(t){return{restrict:"E",link:function(e,n,r){t.isEnabled()&&!r.idleDisabled&&(t.store(!0),e.$on("IdleStart",function(){t.original(n[0].innerText)}),e.$on("IdleWarn",function(e,n){t.setAsIdle(n)}),e.$on("IdleEnd",function(){t.restore()}),e.$on("IdleTimeout",function(){t.setAsTimedOut()}))}}}])}(),function(){"use strict";function t(t,e){function n(t,e){var n={},r=e||{};return _core.util.siteName&&(n.siteName=_core.util.siteName),r.params?r.params=Object.assign(n,r.params):r=Object.assign(n,r),_core.util.database.queryRef(t,r)}function r(t,e,n){var r=_core.util.siteName?_core.util.siteName:"",a=Object.assign({siteName:r},n),i=Array.isArray(t)?t:[t];return _core.util.database.update(i,e,a)}function a(t,e){return r(t,{compressed:_core.encoding.compress(e),editTime:firebase.database.ServerValue.TIMESTAMP})}function i(t,e,r,a){return new Promise(function(i,o){var u=a||{},s=n(t,u.src);s.once("value").then(function(t){n(e,u.dest)[u.set===!0?"set":"update"](t.val()).then(function(){r?s.set(null).then(i):i()})}).catch(o)})}function o(t,e){return new Promise(function(r,a){var i=e||{},o={},u=n(t,Object.assign(i,{params:i.params||{}}));u.once("value",function(t){t.forEach(function(t){var e=t.val(),n=t.key;o[n]={name:(i.fileName?e[i.fileName]:n)+(i.fileExtension||".js"),date:e.editTime,type:"file"}}),r(o)}).catch(a)})}function u(r,a){function i(e){t(function(){s.result.hits=e.hits||[]},0)}var o=a||{},u=n(r),s=new _core.util.database.Pagination(u,Object.assign({filter:function(t,n){return e("orderBy")(t,n.orderBy)}},o),i);return s.size=10,s.page=1,s.onReorder=function(t){s.get(s.page,s.size,t)},s}function s(t,e){return _core.util.database.request(t,e)}function c(t){var e=t,n=[[/\./g,"^%0"],[/#/g,"^%1"],[/\$/g,"^%2"],[/\[/g,"^%3"],[/\]/g,"^%4"]];return angular.forEach(n,function(t){e=e.replace(t[0],t[1])}),e}function l(t,e){return _core.util.database.getWithCache(t,e)}var d={queryRef:n,update:r,copy:i,getFileTableFromList:o,pagination:u,request:s,updateCacheable:a,getValidKey:c,getWithCache:l};return d}t.$inject=["$timeout","$filter"],angular.module("quartz.components").factory("$firebase",t)}(),function(){"use strict";angular.module("quartz.components").filter("reverse",function(){return function(t){return t.slice().reverse()}}).filter("relativeTime",["$translate","$timeout",function(t,e){function n(t,e){return Math.round(Math.abs(t-e)/1e3)}function r(t,e){var r=e||new Date;t instanceof Date||(t=new Date(t));var a,i=60,o=60*i,u=24*o,s=7*u,c=30*u,l=365*u,d=n(r,t),m=1;return d>u&&s>d&&(t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),d=n(r,t)),30>d?(a="JUST",m=0):i>d?(a="SECS",m=d):2*i>d?a="MIN":o>d?(a="MINS",m=Math.floor(d/i)):1===Math.floor(d/o)?a="HOUR":u>d?(a="HOURS",m=Math.floor(d/o)):2*u>d?a="DAY":s>d?(a="DAYS",m=Math.floor(d/u)):1===Math.floor(d/s)?a="WEEK":c>d?(a="WEEKS",m=Math.floor(d/s)):1===Math.floor(d/c)?a="MONTH":l>d?(a="MONTHS",m=Math.floor(d/c)):1===Math.floor(d/l)?a="YEAR":(a="YEARS",m=Math.floor(d/l)),[m,"DATE."+a]}function a(n){if(n){if(o[n])return o[n];if(!i[n]){i[n]=!0;var a=new Date(n);_core.syncTime().then(function(u){var s=r(a,new Date(u())),c=function(t){e(function(){o[n]=t.split(" ")[1]||!s[0]?t:s[0]+" "+t,i[n]=!1,console.log(o)},0)};t(s[1]).then(c,c)})}return o[n]}}var i={},o={};return a.$stateful=!0,a}]).filter("unique",function(){return function(t,e){for(var n={},r=[],a=0;a<t.length;a++)"undefined"==typeof n[t[a][e]]&&(n[t[a][e]]="",r.push(t[a]));return r}}).filter("percentage",["$window",function(t){return function(e,n,r){return n=angular.isNumber(n)?n:3,r=r||"%",t.isNaN(e)?"":Math.round(e*Math.pow(10,n+2))/Math.pow(10,n)+r}}])}(angular),function(){"use strict";var t="error",e="/error/:errorId",n="errorCtrl",r="components/errorHandler/error.html";angular.module("quartz.components").controller(n,["$scope","$stateParams",function(t,e){t.error=e}]).config(["$stateProvider",function(a){a.state(t,{url:e,templateUrl:r,controller:n,resolve:{user:["$auth",function(t){return t.waitForAuth()}]}})}]).factory("$errorHandler",["$state",function(t){function e(e){t.go("error",e),$scope.$$phase||$scope.$apply()}return function(t){var n=t||{};return n.type?void(n.openErrorPage&&e(n)):function(t){console.log(JSON.stringify(t))}}}])}(),function(){"use strict";function t(t){this.queryList=function(t){return _core.util.elasticsearch.queryList(t)},this.pagination=function(e,n,r){var a=_core.util.elasticsearch.pagination(e,n,r);return pagination.get=function(e,n,r){var i=a.get(e,n,r);i.then(function(r){pagination.size=n,pagination.page=e,pagination.result={hits:r.hits,total:r.total},t(angular.noop,0)})},pagination}}t.$inject=["$timeout"],angular.module("quartz.components").factory("$elasticSearch",t)}(),function(){"use strict";function t(t,e,n){function r(t){var n=[];return t.forEach(function(t,r){n[r]=-1===t.search("//")?e.ref("file-path?path="+t).getDownloadURL():Promise.resolve(t)}),Promise.all(n)}function a(t){if("string"==typeof t)return null!==t.match(/\.css$/);if("object"==typeof t){var e=t.src||t.href;return"stylesheet"===t.rel||null!==e.match(/\.css$/)}}function i(t){if("string"==typeof t)return null!==t.match(/\.js/);if("object"==typeof t){var e=t.src||t.href;return"text/javascript"===t.type||null!==e.match(/\.js$/)}}function o(t,e){var o=t||[],u=[],s=[];return o.forEach(function(t){"string"==typeof t?a(t)?s.push(t):i(t)&&u.push(t):"object"==typeof t&&(t.src=t.src||t.href||"",a(t)&&s.push(t.src),i(t)&&!t.defer&&u.push(t.src))}),r(s).then(function(t){t.forEach(function(t,r){n.set("style"+e+r,t,!0)})}),new Promise(function(t,e){r(u).then(function(e){t({serie:!0,files:e})}).catch(e)})}function u(e,r,a){var i=e||{},u=i.sources;n.setDirectly("style"+a,i.css,!0),u?o(u,a).then(function(e){e.files.length?t.load(e).then(function(){r(i)}):r(i)}):r(i)}function s(t,n){return new Promise(function(r){var a=n,i=a.replace(/\s+/g,"");angular.isObject(t)?u(t,r,i):e.getWithCache(t+"?type=detail&id="+a).then(function(t){u(t,r,i)})})}function c(e){return new Promise(function(n){e.sources?o(e.sources,"selectedSite").then(function(e){e.files.length?t.load(e).then(function(){n()}):n()}):n()})}return{getDownloadUrls:r,load:s,loadSite:c}}t.$inject=["$ocLazyLoad","$firebaseStorage","injectCSS"],angular.module("quartz.components").factory("$lazyLoad",t)}(),function(){"use strict";function t(t){var e={},n={},r=function(t,e){var n=document.createElement("script");return n.id=t,n.type="text/javascript",e&&(n.text=e||""),n};return e.set=function(e,a){var i;return n[e]||(n[e]=t.defer(),i=r(e),i.onload=n[e].resolve,angular.element("head").append(i),i.src=a),n[e].promise},e.setDirectly=function(e,a){if(!n[e]){n[e]=t.defer();var i=r(e,a);n[e].resolve(),angular.element("head").append(i)}return n[e].promise},e}t.$inject=["$q"],angular.module("quartz.components").factory("injectJS",t)}(),function(){"use strict";function t(){function t(t){return"?"==t.charAt(0)?!0:("/"==t.charAt(0)&&(t=t.substring(1)),!!f[t])}function e(t,n,r,a){var i=a||1,o=[];return angular.forEach(t,function(t){var a={};a.cid=Math.random().toString(),angular.forEach(h,function(e){a[e]=t[e]}),t.css&&(a.css=t.css),o.push(a),r>i&&(n[a.cid]=e(t.divs||[],n,r,i+1))}),1===i&&(n.root=o),o}function n(t,e,r){var a=[],i=e||"root";return angular.forEach(t[i],function(e){var i={};e.css&&r&&e.name&&(r[e.name]=e.css),angular.forEach(h,function(t){e[t]&&(i[t]=e[t])}),e.cid&&(i.divs=n(t,e.cid,r)),a.push(i)}),a}function r(t){var e="";return angular.forEach(t,function(t,n){var r="all"===n?"":"-"+n;angular.forEach(t,function(t,n){if(null!==t){var a='="'+t+'" ',i=n+r;switch(n){case"flex":"flex"===t&&(a=" ");break;case"flex-offset":break;case"flex-order":break;case"layout":break;case"layout-align":a='="'+t.x+" "+t.y+'" ';break;default:i=t?i+" ":"",a=""}e+=i+a}})}),e}function a(e){e=e||{};var n,a=e.tag||"div",i=t(a),o=e.type;if(e.content){if(n=e.content,"text"===o)return n}else n="tag"===o?"<!--include-->":"";var u="";return e.id&&(u+='id="'+e.id+'" '),e.layout&&(u+=r(e.layout)),e.class&&(u+=' class="'+e.class+'"'),e.style&&(u+=' style="'+e.style+'"'),e.attrs&&(u+=" "+e.attrs),e.ctrl&&(u+=' ng-controller="'+e.ctrl+" as "+(e.ctrlAs||"vm")+'"'),-1!==a.search("/")&&(i=!0),n="<--tag-- --custom-->"+(i?"":n+"<--endtag-->"),n=n.replace("--custom--",u),n=n.replace("--tag--",a),n=n.replace("--endtag--","/"+a)}function i(t){var e="";return angular.forEach(t,function(t){var n=a(t);e+=n.replace("<!--include-->",t.divs?i(t.divs):"")}),e}function o(t,e){var n=angular.copy(e)||{};return n.content="<!--include-->",n.tag="div",n.style=n.style||"",a(n).replace("<!--include-->",i(t))}function u(t){return-1!==t.search("!--custom--")}function s(t){return-1!==t.search("!--tag--")&&-1!==t.search("!--endtag--")}var c=[null,0,5,10,15,20,25,30,33,35,40,45,50,55,60,65,66,70,75,80,85,90,95,100],l=["flex"].concat(c),d={breakpoints:["all","xs","gt-xs","sm","gt-sm","md","gt-md","lg","gt-lg","xl"],mediaQueries:["all","0~599","600~959","960~1279","1280~1919",">1920"],layout:{flex:l,"flex-offset":c,layout:[null,"row","column"],"layout-align":{x:[null,"start","center","end","space-around","space-between"],y:[null,"start","center","end","stretch"]}}},m=[[""],["DefaultToolbarController"],["ArticleDetailController"],["ArticleListController"],["ProductDetailController"],["ShoppingCartController"],["AllpayCheckoutCtrl"]],f={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1},p=[{type:"tag",content:""},{type:"text",content:""}],g=[{type:"tag",content:"<!--include-->"},{type:"text"}],h=["options","id","name","type","tag","layout","class","style","attrs","content","ctrl","ctrlAs"];return{layoutOptions:d,ctrls:m,convert:e,convertBack:n,compile:i,compileAll:o,compileTag:a,isAttrsConfigurable:u,isTagConfigurable:s,containers:g,items:p}}function e(t,e){function n(t){var n=JSON.parse((t||{}).params||e.params||"{}");return angular.extend({product:{},article:{}},n)}return{get:n}}e.$inject=["$q","$stateParams"],angular.module("quartz.components").factory("customService",t).factory("customParams",e)}(),function(){"use strict";function t(t,e,n){function r(t){var e=n.onStart({to:"**"},function(){a.remove(t),e()})}var a={},i=function(t,e){var n=document.createElement("link");return n.id=t,n.rel="stylesheet",n.type="text/css",n.href=e,n},o=function(t,e){var n=document.createElement("style");return n.id=t,n.innerHTML=e||"",n},u=function(t,e,n){for(var r in document.styleSheets){var a=document.styleSheets[r].href||"";if(a.split("/").slice(-1).join()===t)return void e.resolve()}n++,setTimeout(function(){u(t,e,n)},50)};return a.set=function(e,n,a){var o,s=0,c=t.defer();return angular.element("link#"+e).length||(o=i(e,n),o.onload=c.resolve,angular.element("head").append(o)),u(n,c,s),a&&r(),c.promise},a.setDirectly=function(t,e,n){if(angular.element("style#"+t).length)angular.element("style#"+t).remove(),a.setDirectly(t,e);else{var i=o(t,e);angular.element("head").append(i)}n&&r()},a.remove=function(t){angular.element("#"+t).remove()},a}t.$inject=["$q","$rootScope","$transitions"],angular.module("quartz.components").factory("injectCSS",t)}(),function(){"use strict";function t(){function t(){return _core.util.auth.currentUser}function e(){return _core.util.siteName}this.updateProfile=function(n,r,a){var i=t(),o=e();if(i.updateProfile({displayName:n.name,photoURL:n.photoURL}).then(function(){}),n.email&&i.updateEmail(n.email),"object"==typeof r&&_core.util.storage.update("site-user?type=detail&siteName="+o+"&userId="+i.uid,r),"object"==typeof a){var u="type=list&siteName="+o+"&userId="+i.uid;_core.util.database.update(["site-user?"+u,"root-user?"+u],a)}},this.changePassword=function(e){var n=t();return n.updatePassword(e)}}angular.module("quartz.components").factory("profile",t)}(),function(){"use strict";function t(t){{var e=firebase.auth(_core.util.app);new Promise(function(t){var n=e.onAuthStateChanged(function(){t(e.currentUser),n()})})}return e.waitForAuth=function(){return Promise.resolve(e.currentUser)},e.requireAuth=function(){return e.currentUser?Promise.resolve(e.currentUser):Promise.reject()},e.checkIfAccountExistOnFb=function(){return _core.util.auth.checkIfAccountExist()},e.createAccount=function(t){return _core.util.auth.createAccount(t)},e.loginWithProvider=function(t,e){return _core.util.auth.loginWithProvider(t,e)},e.removeUserData=function(e,n){var r=e.uid;t.update(["user?type=list","user/type=detail"],{"@all":null},{id:r}).then(function(){n&&n(e)})},e}function e(t,e,r){e.onAuthStateChanged(function(e){t.user=e,t.loggedIn=!!e,e?r.queryRef("user-path?userId="+e.uid+"&path=info").once("value",function(r){var a={},i=e.providerData;a.info=r.val()||{},a.info.name=e.displayName||i[0].displayName||n(e.email),a.info.photoURL=e.photoURL||i[0].photoURL,t.user.info=a.info}):console.log("no user",e)})}function n(t){return t.substring(0,t.indexOf("@"))}t.$inject=["$firebase"],e.$inject=["$rootScope","$auth","$firebase"],angular.module("quartz.components").factory("$auth",t).run(e)}(),function(){"use strict";angular.module("quartz.profiler",["digestHud"])}(),function(){"use strict";function t(t){t.enable(),t.setHudPosition("top right"),t.numTopWatches=20,t.numDigestStats=25}t.$inject=["digestHudProvider"],angular.module("quartz.profiler").config(t)}(),function(){"use strict";angular.module("quartz.directives",[])}(),function(){"use strict";function t(){return{restrict:"E",templateUrl:"app/quartz/directives/templates/user-menu.tmpl.html",controller:"DefaultToolbarController",controllerAs:"userMenu"}}angular.module("quartz.directives").directive("userMenu",t)}(),function(){"use strict";function t(t,e){function n(n,r,a){t(r);var i=r.controller("mdTheme");if(angular.isDefined(i)){var o=a.themeBackground,u="default";if(-1!==o.indexOf(":")){var s=a.themeBackground.split(":");o=s[0],u=s[1]}var c=e.getThemeHue(i.$mdTheme,o,u);angular.isDefined(c)&&r.css({"background-color":e.rgba(c.value),"border-color":e.rgba(c.value),color:e.rgba(c.contrast)})}}var r={link:n,restrict:"A"};return r}t.$inject=["$mdTheming","qtTheming"],angular.module("quartz.directives").directive("themeBackground",t)}(),function(){"use strict";function t(){function t(t,e,n,r){r.$viewChangeListeners.push(function(){r.$setValidity("samePassword",t.qtSamePassword.$modelValue===r.$modelValue),t.qtSamePassword.$setValidity("samePassword",t.qtSamePassword.$modelValue===r.$modelValue)})}var e={restrict:"A",require:"ngModel",link:t,scope:{qtSamePassword:"="}};return e}angular.module("quartz.directives").directive("qtSamePassword",t)}(),function(){"use strict";function t(t){function e(e,n,r){var a=r.paletteBackground.split(":"),i=t.getPaletteColor(a[0],a[1]);angular.isDefined(i)&&n.css({"background-color":t.rgba(i.value),"border-color":t.rgba(i.value),color:t.rgba(i.contrast)})}var n={bindToController:!0,link:e,restrict:"A"};return n}t.$inject=["qtTheming"],angular.module("quartz.directives").directive("paletteBackground",t)}(),function(){"use strict";function t(t,e){function n(n,r,a){return-1!==a.fsSrc.search("//")?void a.$set("src",a.fsSrc):void t.ref("file-path?path="+a.fsSrc,{isJs:!1}).getMetadata().then(function(t){a.$set("src",t.downloadURLs),e.useBandwidth(t.size)})}return{link:n,restrict:"A"}}function e(t,e){function n(n,r,a){return-1!==a.fsHref.search("//")?void a.$set("href",a.fsHref):void t.ref("file-path?path="+a.fsHref,{isJs:!1}).getMetadata().then(function(t){r.on("click",function(){e.useBandwidth(t.size)}),a.$set("href",t.downloadURLs)})}return{link:n,restrict:"A"}}t.$inject=["$firebaseStorage","$usage"],e.$inject=["$firebaseStorage","$usage"],angular.module("quartz.directives").directive("fsSrc",t).directive("fsHref",e)}(),function(){"use strict";function customCtrl(t,e,n){e.apiCtrl&&n(e.apiCtrl,{$scope:t})}function customItem($compile,$injector,$ocLazyLoad,$lazyLoad){var linker=function(scope,element,attrs,ctrl){function loadDeferedJs(){if(!deferedJsLoaded){var t=[];angular.forEach(scope.sources,function(e){var n=(e.src||"").split("js");e.src&&""===n[n.length-1]&&e.defer&&t.push(e.src)}),$lazyLoad.getDownloadUrls(t).then(function(t){$ocLazyLoad.load({serie:!0,files:t})}),deferedJsLoaded=!0}}function injectCustomJs(){if(scope.customJs){var js,customJs=scope.customJs;try{eval("js ="+customJs),(angular.isFunction(js)||angular.isArray(js)&&angular.isFunction(js[js.length]))&&$injector.invoke(js,ctrl,{$scope:scope})}catch(e){try{eval(customJs)}catch(e){}}}}function compile(){if("compiling"!==status&&scope.content){status="compiling",angular.forEach(ctrl,function(t,e){delete ctrl[e]}),angular.forEach(_ctrl,function(t,e){ctrl[e]=t}),angular.isString(scope.content)&&(attrs.modelAs&&(scope[attrs.modelAs]=scope.model),element.html(scope.content).show(),injectCustomJs(),loadDeferedJs(),$compile(element.contents())(scope));var t=setTimeout(function(){status="",clearTimeout(t)},1e3)}}var _ctrl=angular.copy(ctrl),status,deferedJsLoaded;scope.$watch("customJs",compile),scope.$watch("content",compile)
};return{restrict:"E",controller:customCtrl,controllerAs:"vm",link:linker,scope:{content:"=",customJs:"=",sources:"="}}}customCtrl.$inject=["$scope","$attrs","$controller"],customItem.$inject=["$compile","$injector","$ocLazyLoad","$lazyLoad"],angular.module("quartz.directives").directive("customItem",customItem)}(),function(){"use strict";function t(t){function e(e,n,r){var a={useEasing:!0,useGrouping:!0,separator:",",decimal:".",prefix:"",suffix:""};if(e.options)for(var i in a)angular.isDefined(e.options[i])&&(a[i]=e.options[i]);r.from=angular.isUndefined(r.from)?0:parseInt(r.from),r.decimals=angular.isUndefined(r.decimals)?2:parseFloat(r.decimals),r.duration=angular.isUndefined(r.duration)?5:parseFloat(r.duration),t(function(){var t=new CountUp(n[0],r.from,e.countupto,r.decimals,r.duration,a);t.start()},500)}var n={link:e,restrict:"A",scope:{countupto:"=",options:"="}};return n}t.$inject=["$timeout"],angular.module("quartz.directives").directive("countupto",t)}(),function(){"use strict";angular.module("app.plugins.stripe",[])}(),function(){"use strict";function t(){function t(t){this.defaultConfig=t}var e={key:"pk_test_6pRNASCoBOKtIshFeQd4XMUh",name:"Quartz",description:"",amount:"",locale:"auto",currency:"USD",panelLabel:"{{amount}}",zipCode:!1,billingAddress:!1,shippingAddress:!1,allowRememberMe:!0,bitcoin:!1,alipay:!1,alipayReusable:!1};this.setParams=function(t){e=t},t.prototype.setParams=function(t){this.defaultConfig=t},t.prototype.getPaymentInfo=function(t,e){var n=t.cart?t.cart:{},r=n.items||[],a=e||{},i="";angular.isString(t.description)||angular.isString(a.description)?i=t.description:angular.isFunction(a.description)?i=a.description(t):(angular.forEach(r,function(t){i=i+(a.namePrefix||"")+t.name+(a.namePostfix||" ")+(a.pricePrefix||"$")+t.price+(a.pricePostfix||"")+(a.quantityPrefix||"*")+t.quantity+(a.quantityPostfix||"")+"#"}),i=i.slice(0,-1));var o=0;return angular.isNumber(t.totalAmount)||angular.isNumber(a.totalAmount)?o=t.totalAmount||a.totalAmount:angular.isFunction(a.totalAmount)?o=a.totalAmount(t):angular.forEach(n,function(t){o+=t.quantity*t.price}),angular.extend({},this.defaultConfig,a.paymentParams||{},{description:i,amount:o})},this.$get=function(){return new t(e)}}function e(t){function e(e){var r=t.defer();return n(function(){var t=window.StripeCheckout.configure(e);r.resolve(t)}),r.promise}return e}function n(t){if(window.StripeCheckout)t();else{var e=document.createElement("script");e.type="text/javascript",e.src="https://checkout.stripe.com/checkout.js",document.body.appendChild(e).onload=t}}e.$inject=["$q"],angular.module("app.plugins.stripe").provider("$stripe",t).factory("stripeCheckout",e)}(),function(){"use strict";function t(t,e,n,r){return{restrict:"E",scope:{buildData:"=",token:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"app/plugins/stripe/stripe-checkout.tmpl.html":e.templateUrl},link:function(a){a.checkout=function(){function i(i){var o=i.payment.stripe;angular.isFunction(o.token)||(o.token=angular.isFunction(a.token)?a.token:function(t){i.id=i.id||(new Date).getTime(),i.siteName=r.siteName,i.payment.stripe=t,i.payment.type="stripe",i._state="order_validate";var a=firebase.database().ref().push().key;e.request({paths:["queue-task?id="+a],data:i},["queue-task?id="+a+"/_id"]).then(function(t){console.log(t),n.empty()},function(t){console.log(t)})}),t(o).then(function(t){t.open(o)})}var o=a.buildData();angular.isFunction(o.then)?o.then(function(t){i(t)}):i(o)}}}}t.$inject=["stripeCheckout","$firebase","ngCart","sitesService"],angular.module("app.plugins.stripe").directive("stripeCheckout",t)}(),function(){"use strict";angular.module("app.plugins.stripe").config(["$stripeProvider",function(){}])}(),function(){"use strict";angular.module("app.plugins.ngdisqus",[])}(),function(){"use strict";function t(){function t(){return document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]}function e(){return c||window.disqus_shortname}function n(t,e){return"//"+t+".disqus.com/"+e}function r(t){var e=document.createElement("script");return e.type="text/javascript",e.async=!0,e.src=t,e}function a(t,e){var n,r,a=t.getElementsByTagName("script");for(r=0;r<a.length;r+=1)if(n=a[r],~n.src.indexOf(e))return!0;return!1}function i(t,e,n){window.disqus_identifier=t,window.disqus_url=e,window.disqus_shortname=n}function o(){var t=window.DISQUSWIDGETS;t&&angular.isFunction(t.getCount)&&t.getCount()}function u(t,e){window.DISQUS.reset({reload:!0,config:function(){this.page.identifier=e,this.page.url=t.absUrl()}})}function s(e,i){var o=t(),u=n(e,i);a(o,u)||o.appendChild(r(u))}var c,l="embed.js",d="count.js";this.setShortname=function(t){c=t},this.$get=["$location",function(t){function n(n){var r=e();if(!angular.isDefined(r))throw new Error("No disqus shortname defined");if(!angular.isDefined(n))throw new Error("No disqus thread id defined");angular.isDefined(window.DISQUS)?u(t,n):(i(n,t.absUrl(),r),s(r,l))}function r(n){i(n,t.absUrl(),c),s(e(),l),s(e(),d),o()}return{commit:n,getShortname:e,loadCount:r}}]}angular.module("app.plugins.ngdisqus").provider("$disqus",t)}(),function(){angular.module("app.plugins.ngdisqus").directive("disqus",["$disqus",function(t){return{restrict:"AC",replace:!0,scope:{id:"=disqus"},template:'<div id="disqus_thread"></div>',link:function(e){e.$watch("id",function(e){angular.isDefined(e)&&t.commit(e)})}}}]).directive("disqusIdentifier",["$disqus",function(t){return{restrict:"A",link:function(e,n,r){t.loadCount(r.disqusIdentifier)}}}])}(),function(){"use strict";angular.module("app.plugins.ngdisqus").config(["$disqusProvider","$locationProvider",function(t){t.setShortname("quartzseed")}])}(),function(){"use strict";angular.module("app.plugins.ngcart",[])}(),function(){"use strict";angular.module("app.plugins.ngcart").provider("$ngCart",function(){this.$get=function(){}}).service("ngCart",["$rootScope","ngCartItem","store","$window",function(t,e,n,r){var a="";t.$on("site:change",function(t,e){a=e}),this.init=function(){this.$cart={shipping:null,taxRate:null,tax:null,items:[]}},this.addItem=function(n,r,a,i,o){var u=this.getItemById(n);if("object"==typeof u)u.setQuantity(i,!1),t.$broadcast("ngCart:itemUpdated",u);else{var s=new e(n,r,a,i,o);this.$cart.items.push(s),t.$broadcast("ngCart:itemAdded",s)}t.$broadcast("ngCart:change",{})},this.getItemById=function(t){var e=this.getCart().items,n=!1;return angular.forEach(e,function(e){e.getId()===t&&(n=e)}),n},this.setShipping=function(t){return this.$cart.shipping=t,this.getShipping()},this.getShipping=function(){return 0==this.getCart().items.length?0:this.getCart().shipping},this.setTaxRate=function(t){return this.$cart.taxRate=+parseFloat(t).toFixed(2),this.getTaxRate()},this.getTaxRate=function(){return this.$cart.taxRate},this.getTax=function(){return+parseFloat(this.getSubTotal()/100*this.getCart().taxRate).toFixed(2)},this.setCart=function(t){return this.$cart=t,this.getCart()},this.getCart=function(){return this.$cart},this.getItems=function(){return this.getCart().items},this.getTotalItems=function(){var t=0,e=this.getItems();return angular.forEach(e,function(e){t+=e.getQuantity()}),t},this.getTotalUniqueItems=function(){return this.getCart().items.length},this.getSubTotal=function(){var t=0;return angular.forEach(this.getCart().items,function(e){t+=e.getTotal()}),+parseFloat(t).toFixed(2)},this.totalCost=function(){return+parseFloat(this.getSubTotal()+this.getShipping()+this.getTax()).toFixed(2)},this.removeItem=function(e){var n=this.$cart.items.splice(e,1)[0]||{};t.$broadcast("ngCart:itemRemoved",n),t.$broadcast("ngCart:change",{})},this.removeItemById=function(e){var n,r=this.getCart();angular.forEach(r.items,function(t,n){t.getId()===e&&(t=r.items.splice(n,1)[0]||{})}),this.setCart(r),t.$broadcast("ngCart:itemRemoved",n),t.$broadcast("ngCart:change",{})},this.empty=function(){t.$broadcast("ngCart:change",{}),this.$cart.items=[],r.localStorage.removeItem(a+"_cart")},this.isEmpty=function(){return this.$cart.items.length>0?!1:!0},this.toObject=function(){if(0===this.getItems().length)return!1;var t=[];return angular.forEach(this.getItems(),function(e){t.push(e.toObject())}),{shipping:this.getShipping(),tax:this.getTax(),taxRate:this.getTaxRate(),subTotal:this.getSubTotal(),totalCost:this.totalCost(),items:t}},this.$restore=function(t){var n=this;n.init(),n.$cart.shipping=t.shipping,n.$cart.tax=t.tax,angular.forEach(t.items,function(t){n.$cart.items.push(new e(t._id,t._name,t._price,t._quantity,t._data))}),this.$save()},this.$save=function(){return n.set(a+"_cart",JSON.stringify(this.getCart()))}}]).factory("ngCartItem",["$rootScope","$log",function(t,e){var n=function(t,e,n,r,a){this.setId(t),this.setName(e),this.setPrice(n),this.setQuantity(r),this.setData(a)};return n.prototype.setId=function(t){t?this._id=t:e.error("An ID must be provided")},n.prototype.getId=function(){return this._id},n.prototype.setName=function(t){t?this._name=t:e.error("A name must be provided")},n.prototype.getName=function(){return this._name},n.prototype.setPrice=function(t){var n=parseFloat(t);n?0>=n?e.error("A price must be over 0"):this._price=n:e.error("A price must be provided")},n.prototype.getPrice=function(){return this._price},n.prototype.setQuantity=function(n,r){var a=parseInt(n);a%1===0?(r===!0?this._quantity+=a:this._quantity=a,this._quantity<1&&(this._quantity=1)):(this._quantity=1,e.info("Quantity must be an integer and was defaulted to 1")),t.$broadcast("ngCart:change",{})},n.prototype.getQuantity=function(){return this._quantity},n.prototype.setData=function(t){t&&(this._data=t)},n.prototype.getData=function(){return this._data?this._data:void e.info("This item has no data")},n.prototype.getTotal=function(){return+parseFloat(this.getQuantity()*this.getPrice()).toFixed(2)},n.prototype.toObject=function(){return{id:this.getId(),name:this.getName(),price:this.getPrice(),quantity:this.getQuantity(),data:this.getData(),total:this.getTotal()}},n}]).service("store",["$window",function(t){return{get:function(e){if(t.localStorage.getItem(e)){var n=angular.fromJson(t.localStorage.getItem(e));return JSON.parse(n)}return!1},set:function(e,n){return void 0===n?t.localStorage.removeItem(e):t.localStorage.setItem(e,angular.toJson(n)),t.localStorage.getItem(e)}}}]).service("fulfilmentProvider",["$injector",function(t){this._obj={service:void 0,settings:void 0},this.setService=function(t){this._obj.service=t},this.setSettings=function(t){this._obj.settings=t},this.checkout=function(){var e=t.get("ngCart.fulfilment."+this._obj.service);return e.checkout(this._obj.settings)}}]).service("ngCart.fulfilment.log",["$q","$log","ngCart",function(t,e,n){this.checkout=function(){var r=t.defer();return e.info(n.toObject()),r.resolve({cart:n.toObject()}),r.promise}}]).service("ngCart.fulfilment.http",["$http","ngCart",function(t,e){this.checkout=function(n){return t.post(n.url,{cart:e.toObject(),options:n.options,payment:n.payment})}}]).service("ngCart.fulfilment.firebase",["$firebase","ngCart",function(t,e){this.checkout=function(n){return t.update(n.refUrl,{cart:e.toObject(),options:n.options||null,payment:n.payment||null})}}])}(),function(){"use strict";angular.module("app.plugins.ngcart").directive("ngcartAddtocart",["ngCart","$mdToast",function(t,e){return{restrict:"E",controller:"CartController",scope:{id:"@",name:"@",quantity:"@",quantityMax:"@",price:"@",data:"="},transclude:!0,link:function(n,r,a,i,o){function u(){return n.inCart()?parseInt(t.getItemById(a.id).getQuantity()):0}n.ngCart=t,n.attrs=a,n.inCart=function(){return t.getItemById(a.id)},n.q=n.inCart()?t.getItemById(a.id).getQuantity():parseInt(n.quantity),n.qtyOpt=[];for(var s=1;s<=n.quantityMax;s++)n.qtyOpt.push(s);n.addToCart=function(r,a,i,o,s){function c(n,o,u){t.addItem(r,a,i,n,s,o),e.show(e.simple().content(u).position("top right").hideDelay(1500))}parseInt(o)+u()>n.quantityMax?c(parseInt(n.quantityMax),!1,"max quantity reached"):c(o,!0,"item added ")},o(n,function(t){r.append(t)})}}}]).directive("ngcartCart",[function(){return{restrict:"E",controller:"CartController",scope:{},templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"app/plugins/ngcart/cart.tmpl.html":e.templateUrl},link:function(){}}}]).directive("ngcartSummary",[function(){return{restrict:"E",controller:"CartController",scope:{},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"app/plugins/ngcart/summary.tmpl.html":e.templateUrl}}}]).directive("ngcartCheckout",[function(){return{restrict:"E",controller:["$rootScope","$scope","ngCart","fulfilmentProvider",function(t,e,n,r){e.ngCart=n,e.checkout=function(){r.setService(e.service),r.setSettings(e.settings),r.checkout().then(function(e){t.$broadcast("ngCart:checkout_succeeded",e)},function(e,n){t.$broadcast("ngCart:checkout_failed",{statusCode:n,error:e})})}}],scope:{service:"@",settings:"="},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"app/plugins/ngcart/checkout.tmpl.html":e.templateUrl}}}])}(),function(){"use strict";function t(t,e){t.ngCart=e}function e(){}function n(t){function e(){var e;t.$watch("vm.query.filter",function(t,n){n||(e=r.query.page),t!==n&&(r.query.page=1),t||(r.query.page=e)})}function n(){r.filter.show=!1,r.query.filter="",r.filter.form.$dirty&&r.filter.form.$setPristine()}var r=this;r.query={filter:"",limit:"10",order:"-id",page:1},r.selected=[],r.filter={options:{debounce:500}},r.removeFilter=n,e()}t.$inject=["$scope","ngCart"],e.$inject=["$scope","ngCart"],n.$inject=["$scope","$timeout","$q"],angular.module("app.plugins.ngcart").controller("CartController",t).controller("AddToCartController",e).controller("CartTableAdvancedController",n)}(),function(){"use strict";angular.module("app.plugins.ngcart").run(["$rootScope","ngCart","ngCartItem","store",function(t,e,n,r){function a(t){angular.isObject(r.get(t+"_cart"))?e.$restore(r.get(t+"_cart")):e.init()}t.$on("ngCart:change",function(){e.$save()}),t.$on("site:change",function(t,e){a(e)}),a("main")}]).value("version","1.0.0")}(),function(){"use strict";function t(t,e,n,r,a){function i(t){var e=JSON.parse((t||{}).params||a.params||'{"product":{}, "article":{}}');return{product:e.product||{},article:e.article||{}}}function o(t){var e=(t||{}).type||"product",n=Object.assign({},i()[e],t||{}),o=n.sort||("product"===e?"itemId":"id"),u="t"+e+"c"+n.cate+"s"+n.subCate+"q"+n.queryString+"t"+n.tag+"s"+o;return d[u]=d[u]||{},n.type=e,n.index=a.siteName,"loaded"===d[u].load&&l.reset!==!0?d[u]:void("loading"!==d[u].load&&(l.reset=!1,d[u].pagination=_core.util.elasticsearch.queryList(n),d[u].get=function(t,e,n){d[u].load="loading";var a=d[u].pagination.get(t,e,n);return a.then(function(n){d[u].load="loaded",d[u].size=e,d[u].page=t,d[u].result={hits:n.hits,total:n.total},r(angular.noop,0)}),a},d[u].get(n.page||1,n.size||5,o)))}function u(t,e){var r=t||"product",i=r+"-categories";return"loaded"===l.cate[r].load&&l.reset!==!0?e?l.cate[r].crumbs:l.cate[r].categories:void("loading"!==l.cate[r].load&&(l.reset=!1,l.cate[r].load="loading",n.getWithCache(i).then(function(t){l.cate[r].categories=t||[],l.cate[r].load="loaded",s(r,a)})))}function s(t,e){e.params&&c(t,i(t,e)[t])}function c(t,e){var n=[],r={},a=e.cate,i=e.subCate,o=e.tag,u=l.cate[t].categories||[];if(r[t]={},a%1===0){r[t].cate=a;var s=angular.copy(r);if(n.push({name:u[a][0],params:s}),i%1===0){r[t].subCate=i;var c=angular.copy(r);n.push({name:u[a][1][i],params:c})}}else n.push({name:"GENERAL.ALLCATE",params:r});o&&(r[t].tag=o,n.push({name:o,params:r})),l.cate[t].crumbs=n}var l=this;e.$on("site:change",function(){l.reset=!0});var d={};this.queryList=o,this.queryProduct=function(t){return angular.extend(t||{},{type:"product"}),o(t)},this.queryArticle=function(t){return angular.extend(t||{},{type:"article"}),o(t)},this.cate={article:{},product:{}},t.onSuccess({to:"**"},function(t){s("article",t.params("to")),s("product",t.params("to"))}),this.getCate=u,this.getCateCrumbs=function(t){return u(t,!0)},this.getProduct=function(t){var e=t||i().product.id;return n.get("product?type=detail&id="+e)},this.getArticle=function(t){var e=t||i().article.id;return n.get("article?type=detail&id="+e)}}t.$inject=["$transitions","$rootScope","$firebaseStorage","$timeout","$stateParams"],angular.module("app.plugins.articleproduct",[]).service("articleProduct",t)}(),function(){"use strict";angular.module("app.plugins.analytics",[])}(),function(){"use strict";function t(t,e,n,r){function a(t,e){var n=e?new Date(e):new Date,r=n.getUTCFullYear()-2e3,a=f(n.getUTCMonth()+1),o=f(n.getUTCDate());return i(t,o,a,r)}function i(t,e,n,r){switch(t){case"season":key=r+""+n;break;case"month":key=r+""+n;break;default:key=r+""+n+e}return parseInt(key).toString(36)}function o(t,r,i){function o(t){u.resolve(t.val())}var u=e.defer(),s=n.queryRef(t).orderByKey();return s=s.startAt(a(r)),i&&(s=s.endAt(a(i))),s.once("value",o),u.promise}function u(t,e){var n=parseInt(t,36)+"",r=n.substring(0,2),a=n.substring(2,4),i=n.substring(4);return e.monthOnly?"01"!==i?"":r+"/"+a:r+"/"+a+"/"+i}function s(t,e){var n={labels:[]},r=e||{};for(var a in t)n.labels.push(u(a,r)),angular.isArray(r.items)?angular.forEach(r.items,function(e){n[e]=n[e]||{},angular.forEach(t[a][e]||t[a],function(t,r){n[e][r]=n[e][r]||[],n[e][r].push(t)})}):angular.forEach(t[a]||t[a],function(t,e){n[e]=n[e]||[],n[e].push(t)});return n}function c(t){var e={},n=[];return angular.forEach(t,function(t){angular.forEach(t,function(t,n){angular.isObject(t)?angular.forEach(t,function(t,r){e[n]=e[n]||{},e[n][r]=e[n][r]?e[n][r]+t:t}):e[n]=e[n]?e[n]+t:t})}),angular.forEach(e,function(t,e){var r={name:e};angular.isObject(t)?angular.extend(r,t):r.count=t,n.push(r)}),n}function l(n,r,a,i){var u=e.defer();return o(n,r,a,i).then(function(e){u.resolve({getChartData:function(t){return s(e,t)},getRankedArr:function(n,r){return t("orderBy")(c(e),n,void 0===r?!0:r)}})}),u.promise}function d(t,n,r){var a=e.defer();return _core.syncTime().then(function(e){var i=e();l(t,i-24*n*60*60*1e3,i,r).then(a.resolve)}),a.promise}function m(t,e,r){_core.syncTime().then(function(i){var o=a(i()),u=e?"/"+e:"";n.queryRef("site-path?path="+t+"/"+o+u).transaction(function(t){var e=t||{};return angular.forEach(r,function(t){e[t]=e[t]?e[t]+1:1}),e})})}var f=r.to2dig;return{getAnalysis:l,getDataInDays:d,record:m}}t.$inject=["$filter","$q","$firebase","snippets"],angular.module("app.plugins.analytics").factory("analysisService",t)}(),function(){"use strict";function t(){return{restrict:"E",scope:{buildData:"=",direct:"@"},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"app/plugins/allpay/allpayCheckout.tmpl.html":e.templateUrl},link:function(){}}}t.$inject=["$mdMedia","$firebase","$sce","$timeout","$q","snippets","$mdDialog","sitesService"],angular.module("app.plugins.analytics")}(),function(){"use strict";angular.module("app.plugins.analytics").config(function(){})}(),function(){"use strict";angular.module("app.plugins.allpay",[])}(),function(){"use strict";function t(){function t(t,e){this.defaultConfig=t,this.getSite=function(){return e.siteName}}var e=!0,n={};this.isStage=function(t){e=!!t},this.setParams=function(t){n=t},t.prototype.getPaymentInfo=function(t,e){function n(t){return 10>t?"0"+t:t}var r=t.cart?t.cart:{},a=r.items||[],i=e||{},o=(i.config||{},i.timeStamp||new Date),u=n(o.getMonth()+1),s=n(o.getDate()),c=n(o.getHours()),l=n(o.getMinutes()),d=n(o.getSeconds()),m=o.getFullYear()+"/"+u+"/"+s+" "+c+":"+l+":"+d,f="";for(var p in a)f=f+(i.namePrefix||"")+a[p].name+(i.namePostfix||" ")+(i.pricePrefix||"$")+a[p].price+(i.pricePostfix||"")+(i.quantityPrefix||"*")+a[p].quantity+(i.quantityPostfix||"")+"#";f=f.slice(0,-1);var g=0;angular.isNumber(t.totalAmount)||angular.isNumber(i.totalAmount)?g=t.totalAmount||i.totalAmount:angular.isFunction(i.totalAmount)?g=i.totalAmount(t):angular.forEach(r,function(t){g+=t.quantity*t.price});var h=angular.extend({},this.defaultConfig,i.paymentParams||{},{ReturnURL:this.defaultConfig.ReturnURL+"?sitename="+this.getSite()+"&uid="+t.clientInfo.uid,PaymentInfoURL:this.defaultConfig.PaymentInfoURL+"?sitename="+this.getSite()+"&uid="+t.clientInfo.uid,MerchantTradeDate:m,TotalAmount:g});return h.MerchantTradeNo=t.id||o.getTime(),h.ItemName=h.ItemName||f||"required, please set a value",h},this.$get=["sitesService",function(e){return new t(n,e)}]}angular.module("app.plugins.allpay").provider("$allpay",t)}(),function(){"use strict";function t(t,e,n,r,a,i,o,u){return{restrict:"E",scope:{buildData:"=",direct:"@"},transclude:!0,templateUrl:function(t,e){return"undefined"==typeof e.templateUrl?"app/plugins/allpay/allpayCheckout.tmpl.html":e.templateUrl},link:function(r,s,c){function l(){var t=a.defer(),n=firebase.database().ref().push().key;return e.request({paths:["queue-task?id="+n],data:d(vm.order)},["queue-task?id="+n+"/payment/allpay/CheckMacValue"]).then(function(e){r.data.payment.allpay.CheckMacValue=e[0],r.data._id=n,console.log("order mac: "+e[0]),t.resolve(r.data)},function(e){t.reject(e),console.log(e)}),t.promise}function d(e){var n={payment:{allpay:{}}};return angular.extend(n,e),n.payment.allpay.DeviceSource=t("xs")?"M":"P",n.id=e.id||e.payment.allpay.MerchantTradeNo,n.siteName=u.siteName,n.payment.type="allpay",n._state="order_validate",i.rectifyUpdateData(n)}function m(t){function a(t,r,a,i){t.data=a,t.allpayFormAction=n.trustAsResourceUrl(f);var o=!1;t.onFormReady=function(){o||(o=!0,l(a).then(function(e){t.data=e}))},t.submit=function(){t.closeDialog();var e=document.getElementsByName("allpay-checkout");e[0].submit(),i.empty()},t.closeDialog=function(){e.queryRef("queue-task?id="+a._id).child("status").set("canceled"),r.hide()}}a.$inject=["$scope","$mdDialog","data","ngCart"];var i=angular.element(document.body);l().then(function(){o.show({parent:i,targetEvent:t,template:'<md-dialog aria-label="List dialog">  <input><form name="allpay-checkout" ng-submit="submit()" target="_blank" method="post" action="{{allpayFormAction}}"><input ng-repeat="(name, value) in data.payment.allpay" name="{{name}}" value="{{value}}"></form><form name="form" class="css-form" novalidate>E-mail: <input type="email" ng-model="data.userInfo.email" name="uEmail" required="" /><div ng-show="form.$submitted || form.uEmail.$touched"><span ng-show="form.uEmail.$error.required">Email is required.</span><span ng-show="form.uEmail.$error.email">Invalid email.</span></div>I agree:<input type="checkbox" ng-model="data.userInfo.agree" name="userAgree" required="" /><div ng-show="!data.userInfo.agree">You need to agree term of use.</div></div></form>  </md-dialog-content>  <md-dialog-actions>    <input class="md-button md-raised" ng-disabled="form.$invalid" ng-click="submit()" type="submit" value="Submit">    <md-button ng-click="closeDialog()" class="md-primary">      Cancel    </md-button>  </md-dialog-actions></md-dialog>',locals:{data:r.data},controller:a})})}r.getCheckMacValue=l,r.showDialog=function(t){var e=r.buildData();angular.isFunction(e.then)?e.then(function(e){r.data=e,m(t)}):(r.data=e,m(t))};var f=""!==c.stage?"https://payment.allpay.com.tw/Cashier/AioCheckOut":"https://payment-stage.allpay.com.tw/Cashier/AioCheckOut";r.allpayFormAction=n.trustAsResourceUrl(f)}}}t.$inject=["$mdMedia","$firebase","$sce","$timeout","$q","snippets","$mdDialog","sitesService"],angular.module("app.plugins.allpay").directive("allpayCheckout",t)}(),function(){"use strict";angular.module("app.plugins.allpay").config(["$allpayProvider",function(t){t.isStage(!0),t.setParams({MerchantID:"2000132",PaymentType:"aio",ReturnURL:"http://http://24.14.103.233/allpayReceive",PaymentInfoURL:"http://24.14.103.233/allpayPaymentInfo",ChoosePayment:"ALL",NeedExtraPaidInfo:"Y",TradeDesc:"required, please set a value."})}])}(),function(){"use strict";angular.module("app.parts.test",[])}(),function(){"use strict";function t(t,e,n,r){{var a=this;n.to2dig}a.uploadFiles=function(t){a.files=t,angular.forEach(t,function(t){e.fixCSSFile(t).then(function(t){r(function(){a.url=URL.createObjectURL(t)},0)}).catch(function(t){console.log(t)})})}}t.$inject=["$firebase","$firebaseStorage","snippets","$timeout"],angular.module("app.parts.test").controller("TestPageController",t)}(),function(){"use strict";function t(t){t.state("playertest",{url:"/admin/test",templateUrl:"app/parts/test/test.tmpl.html",controller:"TestPageController",controllerAs:"vm"})}t.$inject=["$stateProvider"],angular.module("app.parts.test").config(t)}(),function(){"use strict";angular.module("app.parts.design",["app.plugins.articleproduct"])}(),function(){"use strict";function t(t,e,n,r,a,i){r.$get=n.get,r.$getProduct=t.getProduct,r.$getArticle=t.getArticle,r.$queryList=t.queryList,r.$queryProduct=t.queryProduct,r.$queryArticle=t.queryArticle,r.$getCate=t.getCate,r.$getCateCrumbs=t.getCateCrumbs,r.$cate=t.cate,r.$auth=e,r.$login=function(t){var e={pageName:t||i.pageName,params:JSON.stringify(i.params)};"customPage"!==a.name&&(e.stateName=a.name),a.go("authentication.login",e)},r.params=JSON.parse(i.params||"{}"),r.$go||(r.$go=function(t,e){var n={};angular.isObject(e)&&angular.extend(n,e),console.log(e),console.log({pageName:t,params:JSON.stringify(n)})})}function e(t,e,n,r,a,i){function o(t){a(function(){u.pageData=t,u.html=n.compileAll(t.content),u.js=t.js,u.sources=t.sources},0)}var u=this;window.previewRefresh=function(t){console.log(t)},e.$go=function(t,e){var n={};angular.isObject(e)&&angular.extend(n,e),i.go("customPage",{pageName:t||r.pageName,params:JSON.stringify(n)})},angular.extend(u,r),o(t,t.cssKey)}function n(t,e,n,r,a){function i(t){a(function(){o.pageData=t,o.html=n.compileAll(t.content),o.js=t.js,o.sources=t.sources},0)}var o=this;angular.extend(o,r),window.refreshPreview=function(e,n){switch(n){case"init":t.load(e,r.pageName).then(function(t){i(t)});break;default:i(e)}},window.parent.initPreviewFrame()}t.$inject=["articleProduct","$auth","$firebaseStorage","$scope","$state","$stateParams"],e.$inject=["pageData","$scope","customService","$stateParams","$timeout","$state"],n.$inject=["$lazyLoad","$scope","customService","$stateParams","$timeout","$state"],angular.module("app.parts.design").controller("BasicApiController",t).controller("CustomPageController",e).controller("PreviewFrameController",n)}(),function(){"use strict";function t(t){t.state("customPage",{url:"/:siteName/:pageName/?id&params&params2&cate&subCate&queryString&tag&devMode",params:{siteName:"",id:"",pageName:"index",params:"",params2:"",devMode:""},resolve:{getSyncTime:_core.syncTime,authData:["$auth",function(t){return t.waitForAuth()}],pageData:["sitesService","$lazyLoad","$stateParams",function(t,e,n){return new Promise(function(r,a){t.onReady().then(function(){e.load("page",n.pageName).then(function(t){r(t)})}).catch(a)})}]},templateUrl:"app/parts/design/custom-page.tmpl.html",controller:"CustomPageController",controllerAs:"customPage"}).state("previewFrame",{url:"/preview/:siteName/:pageName/?params",params:{siteName:"",pageName:"",params:""},templateUrl:"app/parts/design/custom-page.tmpl.html",resolve:{onSiteReady:["sitesService",function(t){return t.onReady()}]},controller:"PreviewFrameController",controllerAs:"customPage"})}t.$inject=["$stateProvider"],angular.module("app.parts.design").config(t)}(),function(){"use strict";angular.module("quartz",["quartz.components","quartz.directives","ui.router"])}(),function(){"use strict";function t(t,e,n){-1!==e.navigator.platform.indexOf("Win")&&(t.bodyClasses=["os-windows"]),t.debug=n.debug,n.debug&&console.log("debug mode")}t.$inject=["$rootScope","$window","config"],angular.module("quartz").run(t)}(),function(){"use strict";function t(t){t.state("quartz",{"abstract":!0,templateUrl:"app/quartz/layouts/default/default.tmpl.html",controller:"DefaultLayoutController",controllerAs:"layoutController"}).state("quartz-no-scroll",{"abstract":!0,templateUrl:"app/quartz/layouts/default/default-no-scroll.tmpl.html",controller:"DefaultLayoutController",controllerAs:"layoutController"}).state("quartz.admin-default",{"abstract":!0,views:{sidebarLeft:{templateUrl:"app/quartz/components/menu/menu.tmpl.html",controller:"MenuController",controllerAs:"vm"},sidebarRight:{templateUrl:"app/quartz/components/notifications-panel/notifications-panel.tmpl.html",controller:"NotificationsPanelController",controllerAs:"vm"},toolbar:{templateUrl:"app/quartz/components/toolbars/toolbar.tmpl.html",controller:"DefaultToolbarController",controllerAs:"vm"},content:{template:'<div id="admin-panel-content-view" class="{{layout.innerContentClass}}" flex ui-view></div>'},belowContent:{template:'<div ui-view="belowContent"></div>'}}}).state("quartz.client-default",{"abstract":!0,views:{sidebarLeft:{templateUrl:"app/quartz/components/menu/menu.tmpl.html",controller:"MenuController",controllerAs:"vm"},sidebarRight:{templateUrl:"app/quartz/components/notifications-panel/notifications-panel.tmpl.html",controller:"NotificationsPanelController",controllerAs:"vm"},toolbar:{templateUrl:"app/quartz/components/toolbars/toolbar.tmpl.html",controller:"DefaultToolbarController",controllerAs:"vm"},content:{template:'<div id="admin-panel-content-view" class="{{layout.innerContentClass}}" flex ui-view></div>'},belowContent:{template:'<div ui-view="belowContent"></div>'}}}).state("quartz.admin-default-no-scroll",{"abstract":!0,views:{sidebarLeft:{templateUrl:"app/quartz/components/menu/menu.tmpl.html",controller:"MenuController",controllerAs:"vm"},sidebarRight:{templateUrl:"app/quartz/components/notifications-panel/notifications-panel.tmpl.html",controller:"NotificationsPanelController",controllerAs:"vm"},toolbar:{templateUrl:"app/quartz/components/toolbars/toolbar.tmpl.html",controller:"DefaultToolbarController",controllerAs:"vm"},content:{template:'<div flex ui-view class="{{layout.innerContentClass}} overflow-hidden quartz-no-scroll layout-fill" style="position:absolute;"></div>'}}})}t.$inject=["$stateProvider"],angular.module("quartz").config(t)}(),function(){"use strict";angular.module("app.parts",["app.parts.design","app.parts.test"])}(),function(){"use strict";angular.module("app",["quartz","ngAnimate","ngCookies","ngSanitize","ngMessages","ngMaterial","ui.router","pascalprecht.translate","oc.lazyLoad","app.parts","app.load"]),_core.util=new _core.AppUtil;var t=[],e=firebase.database(_core.util.app).ref();_core.util.getSitePreload().then(function(n){var r=[];if(n&&n.commonPackages)for(var a in n.commonPackages)t.push(_core.util.loader.loadPackages(a,n.commonPackages[a],r));angular.module("app.load",r||[]),angular.element(document).ready(function(){console.log(window.location),angular.forEach(window.config,function(t){t.apply(null)}),e.child("config").once("value",function(e){angular.module("app").constant("APP_LANGUAGES",[{name:"LANGUAGES.CHINESE",key:"zh"},{name:"LANGUAGES.ENGLISH",key:"en"},{name:"LANGUAGES.FRENCH",key:"fr"},{name:"LANGUAGES.PORTUGUESE",key:"pt"}]).constant("config",Object.assign({debug:!0,shipping:0,taxRate:0,serverFb:"quartz",home:"quartzplayertest",defaultUrl:"/admin/test",loginRedirectState:"authentication.login"},e.val())),Promise.all(t).then(function(){angular.bootstrap(document,["app"])})})})})}(),window.config=window.config||{},window.config.route=function(){"use strict";function t(t,e,n,r){r.hashPrefix("!"),t.state("404",{url:"/404",templateUrl:"404.tmpl.html",controllerAs:"vm",controller:["$state",function(t){var e=this;e.goHome=function(){t.go(n.home)}}]}).state("500",{url:"/500",templateUrl:"500.tmpl.html",controllerAs:"vm",controller:["$state",function(t){var e=this;e.goHome=function(){t.go(n.home)}}]}),e.when("",n.defaultUrl),e.when("/",n.defaultUrl),e.otherwise("/404")}t.$inject=["$stateProvider","$urlRouterProvider","config","$locationProvider"],angular.module("app").config(t)},window.config=window.config||{},window.config.quartzIdle=function(){"use strict";function t(t,e,n){n.enabled(!1),t.idle(60),t.timeout(864e3)}t.$inject=["IdleProvider","KeepaliveProvider","TitleProvider"],angular.module("app").config(t)},function(){"use strict";
angular.module("app.config",[])}(),angular.module("app").run(["$templateCache",function(t){t.put("app/parts/design/custom-page.tmpl.html",'<custom-item content="customPage.html" api-ctrl="BasicApiController" custom-js="customPage.js" sources="customPage.sources" class="full-height"></custom-item>'),t.put("app/parts/test/test.tmpl.html",'<md-button ng-click="vm.test()">TEST</md-button>\n<md-button ngf-select="vm.uploadFiles($files, $invalidFiles)" multiple\n        accept="text/*" ngf-max-height="1000" ngf-max-size="1MB">\n    Select Files</md-button>\nFiles:\n<ul>\n    <li ng-repeat="f in vm.files" style="font:smaller">{{f.name}} {{f.$errorParam}}\n        <span class="progress" ng-show="f.progress >= 0">\n        <div style="width:{{f.progress}}%"\n             ng-bind="f.progress + \'%\'"></div>\n      </span>\n    </li>\n    <li ng-repeat="f in vm.errFiles" style="font:smaller">{{f.name}} {{f.$error}} {{f.$errorParam}}\n    </li>\n</ul>\n{{vm.errorMsg}}\n<a ng-href="{{vm.url}}">download</a>\n'),t.put("app/plugins/allpay/allpayCheckout.tmpl.html",'<md-button class="md-raised" ng-click="showDialog($event)">allpay</md-button>\r\n'),t.put("app/plugins/ngcart/addtocart.tmpl.html",'<div ng-hide="attrs.id">\n    <md-button class="md-raised" ng-disabled="true" ng-transclude></md-button>\n</div>\n<div ng-show="attrs.id">\n    <div>\n        <md-input-container ng-show="quantityMax">\n            <label>Quantity</label>\n            <md-select name="quantity" id="quantity" ng-model="q">\n                <md-option ng-repeat="v in qtyOpt" value="{{v}}">{{v}}</md-option>\n            </md-select>\n        </md-input-container>\n\n\n        <md-button class="md-raised"\n                   ng-click="addToCart(id, name, price, q, data, true)"\n                   ng-transclude>Add</md-button>\n        <!--<md-button class="md-raised" ng-click="ngCart.removeItemById(id)" style="cursor: pointer;">Remove</md-button>-->\n    </div>\n</div>\n'),t.put("app/plugins/ngcart/cart.tmpl.html",'<div class="alert alert-warning" role="alert" ng-show="ngCart.getTotalItems() === 0">\r\n    Your cart is empty\r\n</div>\r\n\r\n\r\n<div ng-controller="CartTableAdvancedController as vm" ng-show="ngCart.getTotalItems() > 0">\r\n    <md-toolbar class="md-table-toolbar md-default">\r\n        <div class="md-toolbar-tools">\r\n            <span>Shopping Cart</span>\r\n        </div>\r\n    </md-toolbar>\r\n\r\n    <md-toolbar class="md-table-toolbar md-default" ng-show="vm.filter.show && !vm.selected.length">\r\n        <div class="md-toolbar-tools">\r\n            <md-input-container flex>\r\n                <label>search</label>\r\n                <input ng-model="vm.query.filter">\r\n            </md-input-container>\r\n            <md-button class="md-icon-button" ng-click="vm.removeFilter()">\r\n                <md-icon md-font-icon="zmdi zmdi-close"></md-icon>\r\n            </md-button>\r\n        </div>\r\n\r\n    </md-toolbar>\r\n\r\n\r\n    <md-table-container>\r\n        <table md-table class="md-primary md-data-table" md-progress="vm.deferred">\r\n            <thead>\r\n            <tr md-row>\r\n                <th></th>\r\n                <th>Item Name</th>\r\n                <th>Quantity</th>\r\n                <th>Amount</th>\r\n                <th>Total</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody md-body>\r\n            <tr md-row ng-repeat="item in ngCart.getCart().items track by $index">\r\n                <td md-cell><span ng-click="ngCart.removeItemById(item.getId())" class="zmdi zmdi-delete"></span></td>\r\n\r\n                <td md-cell>{{ item.getName() }}</td>\r\n                <td md-cell>\r\n                    <md-icon md-font-icon="zmdi zmdi-minus" ng-class="{\'disabled\':item.getQuantity()==1}"\r\n                             ng-click="item.setQuantity(-1, true)"></md-icon>\r\n                    &nbsp;&nbsp;\r\n                    {{ item.getQuantity() | number }}&nbsp;&nbsp;\r\n                    <md-icon md-font-icon="zmdi zmdi-plus" ng-click="item.setQuantity(1, true)"></md-icon>\r\n                </td>\r\n                <td md-cell>{{ item.getPrice() | currency}}</td>\r\n                <td md-cell>{{ item.getTotal() | currency }}</td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </md-table-container>\r\n\r\n    <md-table-pagination md-limit="vm.query.limit" md-page="vm.query.page" md-total="{{ngCart.getTotalItems()}}"\r\n                         md-trigger="vm.getUsers"></md-table-pagination>\r\n\r\n</div>\r\n\r\n'),t.put("app/plugins/ngcart/checkout.tmpl.html",'\r\n<div ng-if="service==\'http\' || service == \'log\'">\r\n    <button class="btn btn-primary" ng-click="checkout()" ng-disabled="!ngCart.getTotalItems()" ng-transclude>Checkout</button>\r\n</div>\r\n\r\n\r\n<div ng-if="service==\'paypal\'">\r\n\r\n    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top" ng-show="ngCart.getTotalItems()">\r\n        <input type="hidden" name="cmd" value="_xclick" />\r\n        <input type="hidden" name="business" value="{{ settings.paypal.business }}" />\r\n        <input type="hidden" name="lc" value="CA" />\r\n        <input type="hidden" name="item_name" value="{{ settings.paypal.item_name }}" />\r\n        <input type="hidden" name="item_number" value="{{ settings.paypal.item_number }}" />\r\n        <input type="hidden" name="amount" value="{{ ngCart.getSubTotal()}}" />\r\n        <input type="hidden" name="currency_code" value="{{ settings.paypal.currency_code }}" />\r\n        <input type="hidden" name="button_subtype" value="services" />\r\n        <input type="hidden" name="no_note" value="{{ settings.paypal.no_note }}" />\r\n        <input type="hidden" name="tax_rate" value="{{ ngCart.getTaxRate()}}" />\r\n        <input type="hidden" name="shipping" value="{{ ngCart.getShipping()}}" />\r\n        <input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynowCC_LG.gif:NonHostedGuest" />\r\n        <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />\r\n        <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" />\r\n    </form>\r\n\r\n</div>\r\n'),t.put("app/plugins/ngcart/summary.tmpl.html",'<div class="row">\r\n    <div class="col-sm-6 text-right">\r\n        <svg version="1.1"  class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30px" height="30px" xml:space="preserve">\r\n			<path d="M27.715,10.48l-2.938,6.312c-0.082,0.264-0.477,0.968-1.318,0.968H11.831\r\n				c-0.89,0-1.479-0.638-1.602-0.904l-2.048-6.524C7.629,8.514,8.715,7.933,9.462,7.933c0.748,0,14.915,0,16.805,0\r\n				C27.947,7.933,28.17,9.389,27.715,10.48L27.715,10.48z M9.736,9.619c0.01,0.061,0.026,0.137,0.056,0.226l1.742,6.208\r\n				c0.026,0.017,0.058,0.028,0.089,0.028h11.629l2.92-6.27c0.025-0.073,0.045-0.137,0.053-0.192H9.736L9.736,9.619z M13.544,25.534\r\n				c-0.819,0-1.482-0.662-1.482-1.482s0.663-1.484,1.482-1.484c0.824,0,1.486,0.664,1.486,1.484S14.369,25.534,13.544,25.534\r\n				L13.544,25.534z M23.375,25.534c-0.82,0-1.482-0.662-1.482-1.482s0.662-1.484,1.482-1.484c0.822,0,1.486,0.664,1.486,1.484\r\n				S24.197,25.534,23.375,25.534L23.375,25.534z M24.576,21.575H13.965c-2.274,0-3.179-2.151-3.219-2.244\r\n				c-0.012-0.024-0.021-0.053-0.028-0.076c0,0-3.56-12.118-3.834-13.05c-0.26-0.881-0.477-1.007-1.146-1.007H2.9\r\n				c-0.455,0-0.82-0.364-0.82-0.818s0.365-0.82,0.82-0.82h2.841c1.827,0,2.4,1.103,2.715,2.181\r\n				c0.264,0.898,3.569,12.146,3.821,12.999c0.087,0.188,0.611,1.197,1.688,1.197h10.611c0.451,0,0.818,0.368,0.818,0.818\r\n				C25.395,21.21,25.027,21.575,24.576,21.575L24.576,21.575z"/>\r\n</svg>\r\n    </div>\r\n    <div class="col-sm-6">{{ ngCart.getTotalItems() }}\r\n        <ng-pluralize count="ngCart.getTotalItems()" when="{1: \'item\', \'other\':\'items\'}"></ng-pluralize>\r\n        <br />{{ ngCart.totalCost() | currency }}\r\n    </div>\r\n</div>\r\n'),t.put("app/plugins/stripe/stripe-checkout.tmpl.html",'<md-button class="md-raised" ng-click="checkout()">stripe</md-button>\r\n'),t.put("app/quartz/components/error-handler/error.tmpl.html","<h2>error</h2>\r\n\r\ntype:{{error.type}}<br>\r\ncontent:{{error.message}}\r\n"),t.put("app/quartz/directives/templates/user-menu.tmpl.html",'<md-menu>\n    <md-button aria-label="Open user menu" ng-click="$mdOpenMenu()" aria-label="side navigation">\n        <img  class="toolbar-user-avatar" ng-src="{{user.info.photoURL}}">\n        {{user.info.name}}\n    </md-button>\n    <md-menu-content width="4">\n        <md-menu-item>\n            <md-button ng-click="userMenu.toggleNotificationsTab(2)" aria-label="side navigation">\n                <md-icon md-font-icon="fa fa-cog"></md-icon>\n                <span translate="ADMIN.TOOLBAR.SETTINGS"></span>\n            </md-button>\n        </md-menu-item>\n        <md-menu-item>\n            <md-button ui-sref="quartz.admin-default.profile" aria-label="side navigation">\n                <md-icon md-font-icon="fa fa-user"></md-icon>\n                <span translate="ADMIN.TOOLBAR.PROFILE"></span>\n            </md-button>\n        </md-menu-item>\n        <md-menu-item>\n            <md-button ui-sref="quartz.admin-default.yourOrders" aria-label="side navigation">\n                <md-icon md-font-icon="fa fa-list"></md-icon>\n                <span translate="ADMIN.TOOLBAR.YOURORDERS"></span>\n            </md-button>\n        </md-menu-item>\n        <md-menu-divider></md-menu-divider>\n        <md-menu-item>\n            <md-button ng-click="userMenu.logout()" aria-label="side navigation">\n                <md-icon md-font-icon="fa fa-sign-out"></md-icon>\n                <span translate="ADMIN.TOOLBAR.LOGOUT"></span>\n            </md-button>\n        </md-menu-item>\n    </md-menu-content>\n</md-menu>\n')}]);