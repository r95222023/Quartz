function isNumeric(e){return!Array.isArray(e)&&e-parseFloat(e)+1>=0}!function(){"use strict";function e(e){this.util=e,this.tracker=[]}window._core=window._core||{},window._core.Analytics=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&null!=module&&(module.exports=e),e.prototype.applyTracker=function(e){for(var t in e||{})switch(t){case"ga":var r=e[t];!function(e,t,r,n,o,a,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,a=t.createElement(r),i=t.getElementsByTagName(r)[0],a.async=1,a.src=n,i.parentNode.insertBefore(a,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),this.tracker.push("ga"),ga("create",r.id,"auto"),r.send&&ga("send","pageview")}}}(),function(e){"use strict";function t(t){var r=t||c,n=r.appName||r.databaseURL;this.app=e.initializeApp(r,n),this.paths=r.paths||s,this.database=new window._core.DatabaseUtil(this),this.storage=new window._core.StorageUtil(this),this.elasticsearch=new window._core.ElasticSearch(this),this.usage=new window._core.Usage(this),this.usage.init(),this.auth=new window._core.Auth(this),this.site=new window._core.SiteUtil(this),this.loader=new window._core.Loader(this),this.analytics=new window._core.Analytics(this)}window._core=window._core||{},window._core.AppUtil=t,"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&null!=module&&(module.exports=t);var r="sites/detail/:siteName",n=r+"/users/detail/:userId",o="analysis/months/:month",a="analysis/weeks/:week",i="analysis/dates/:date",s={"order-analysis":r+"/orders/analysis/:path","order-analysis-month":r+"/orders/"+o,"order-analysis-week":r+"/orders/"+a,"order-analysis-date":r+"/orders/"+i,servers:"servers",queue:"queue","queue-tasks":"queue/tasks","queue-task":"queue/tasks/:id","query-request":"query/request","query-response":"query/response","query-specs":"query/specs","query-cache":"query/cache",templates:"templates/:type",template:"templates/:type/:id","my-sites":"users/detail/:uid/sites","user-path":"users/detail/:userId/:path",sites:"sites/:type",site:"sites/:type/:siteName","site-path":r+"/:path","site-config-preload":r+"/config/preload","site-config-user":r+"/config/user","site-config-payment":r+"/config/payment/",files:r+"/files","file-path":r+"/files/:path","file-root-path":r+"/files:path",user:n,"users-site":r+"/users/:type/:userId","site-users":r+"/users/:type","site-user":r+"/users/:type/:userId","root-user":"users/:type:/:userId/sites/:siteName",pages:r+"/pages/:type",page:r+"/pages/:type/:id","page-property":r+"/pages/:type/:id/:property",widgets:r+"/widgets/:type",widget:r+"/widgets/:type/:id",products:r+"/products/:type","product-categories":r+"/products/config/categories",product:r+"/products/:type/:id",articles:r+"/articles/:type","article-categories":r+"/articles/config/categories",article:r+"/articles/:type/:id",orders:r+"/orders/:type","site-orders":r+"/orders/:type","site-order":r+"/orders/:type/:id","order-payment":r+"/orders/:type/:orderId/payment","user-order-payment":n+"/orders/:type/:orderId/payment","user-orders":n+"/orders/:type","order-payment-allpay":r+"/orders/detail/:orderId/payment/allpay","orders-analysis":r+"/orders/analysis/:dateId",notifications:"users/detail/:uid/notifications",plans:"plans/:type"},c={apiKey:"AIzaSyAfxA30u_wPOkVCn727MJXZ4eFhg4raKdI",authDomain:"quartz.firebaseapp.com",databaseURL:"https://quartz.firebaseio.com",storageBucket:"project-3415547818359859659.appspot.com",appName:"quartz"};t.prototype.parseRefUrl=function(e,t,r){var n=e,o="object"==typeof t?t.params||t:{},a=Object.assign({},o),i=e.split("?"),s=(i[1]||"").split("&");if(""!==s[0]&&s.forEach(function(e){var t=e.split("=");a[t[0]]=t[1]}),this.paths[i[0]]){n=this.paths[i[0]];for(var c in a)n=n.replace(":"+c,a[c+""])}var u=1===n.split(".").length;return n=r&&u?n+".js":n}}(firebase),function(){function e(e){this.util=e,this.database=firebase.database(e.app),this.auth=firebase.auth(e.app),this.currentUser=this.auth.currentUser}window._core=window._core||{},window._core.Auth=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&null!=module&&(module.exports=e),e.prototype.loginWithProvider=function(e,t){var r,n="object"==typeof t?t:{};switch(e){case"google":r=new firebase.auth.GoogleAuthProvider;break;case"facebook":r=new firebase.auth.FacebookAuthProvider;break;case"twitter":r=new firebase.auth.TwitterAuthProvider;break;case"github":r=new firebase.auth.GithubAuthProvider}return n.popup===!1?this.auth.signInWithRedirect(r):this.auth.signInWithPopup(r)},e.prototype.checkIfAccountExist=function(){var e=this.currentUser,t=this;return new Promise(function(r,n){e||n("AUTH_NEEDED"),this.util.site.getSiteName().then(function(o){t.util.database.queryRef("site-user",{siteName:o,type:"detail",userId:e.uid}).child("createdTime").once("value",function(e){r(!!e.val())},function(e){n(e)})})})},e.prototype.getBasicUserData=function(){var e={createdTime:firebase.database.ServerValue.TIMESTAMP};return e},e.prototype.createAccount=function(){var e=this.currentUser,t=this,r=this.getBasicUserData(e);return new Promise(function(n,o){t.util.site.getSiteName().then(function(a){var i={siteName:a,userId:e.uid},s={};["site-user","root-user"].forEach(function(){["list","detail"].forEach(function(e){var n=t.util.parseRefUrl(n,Object.assign({type:e},i));s[n]=r})}),t.database.ref().update(s).then(n).catch(o)})})}}(),function(){"use strict";function e(e){this.util=e,this.database=firebase.database(e.app)}function t(e,t){for(var r=e,n=0;n<s.length;n++)r=r.replace(s[n][t?0:1],s[n][t?1:0]);return r}function r(e,t){var r=_core.encoding.decompress({compressed:t});return!(e&&e<r.cachedTime)}function n(e,t,r){var n=r||{},o=e.toString().split(".com/")[1];e.once("value",function(e){var r=_core.encoding.decompress(e.val());return r?(n.pre&&n.pre(e,r),void _core.syncTime().then(function(e){localStorage&&(r.cachedTime=e(),localStorage.setItem(o,_core.encoding.compress(r))),t(r)})):void t(null)})}function o(e){function t(e){return new Promise(function(t,r){var n=function(r){null!==r.val()&&(t(r.val()),e.off())};e.on("value",n,r)})}var r=[];return e.forEach(function(n,o){r[o]=t(e[o])}),Promise.all(r)}function a(e,t,r){var n=t||{};n.size=n.size||20,this.listRef=e,this.query=n,this.cache={},this.onData=r,this.result={total:0},this.cache={},this.maxCachedPage=0}function i(e,t,r){return"s"+t+"p"+e+"o"+r}window._core=window._core||{},window._core.DatabaseUtil=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&null!=module&&(module.exports=e),e.prototype.queryRef=function(e,t){var r,n=t||{},o=this.database;if(!e)return o.ref().root;if(r=-1!==e.search("//")?o.refFromURL(this.util.parseRefUrl(e)):o.ref(this.util.parseRefUrl(e,n)),!n.orderBy)return r;var a="orderBy"+n.orderBy.split(":")[0];return r="orderByChild"===a?r[a](n.orderBy.split(":")[1]):r[a](),n.startAt&&(r=r.startAt(n.startAt)),n.endAt&&(r=r.endAt(n.endAt)),n.equalTo&&(r=r.equalTo(n.equalTo)),n.limitToFirst&&(r=r.limitToFirst(n.limitToFirst)),n.limitToLast&&(r=r.limitToLast(n.limitToLast)),r};var s=[[/\./g,"^%0"],[/#/g,"^%1"],[/\$/g,"^%2"],[/\[/g,"^%3"],[/\]/g,"^%4"]];e.prototype.formalizeKey=function(e){return t(e)},e.prototype.deFormalizeKey=function(e){return t(e,!0)},e.prototype.getWithCache=function(e,t){var o="string"==typeof e?this.queryRef(e,t):e,a=o.toString().split(".com/")[1];return new Promise(function(e){if(localStorage&&localStorage.getItem(a)){var i=localStorage.getItem(a);o.child("editTime").once("value",function(a){r(a.val())?n(o,e,t):e(_core.encoding.decompress({compressed:i}))})}else n(o,e,t)})},e.prototype.request=function(e,t){var r=this;return new Promise(function(n,a){r.update(e.paths,e.data,e.params).then(function(){var e=[];t.forEach(function(t,n){e[n]=r.queryRef(t)}),o(e).then(n)}).catch(function(e){a(e)})})},e.prototype.update=function(e,t,r){var n=this,o={};return e.forEach(function(e,a){var i=n.util.parseRefUrl(e,{params:r||{}});o[i]={};for(var s in t){var c=t[s],u=s.split("@"),l=u[1]||"",p=u[0];(""===l||"all"===l||-1!==l.indexOf(a)||-1!==l.indexOf(e))&&(p?o[i][p]=c:o[i]=c)}}),this.queryRef().update(o)},e.prototype.Pagination=a,a.prototype.get=function(e,t,r){var n=this,o=this.query.preload||2,a=i(e,t,r);return n.cache&&n.cache[a]&&parseInt(e)+o<n.maxCachedPage?(n.result.hits=n.cache[a],Promise.resolve(n.cache[a])):(n.maxCachedPage=parseInt(e)+2*o,new Promise(function(o,a){n.listener(n.maxCachedPage,e,t,r,o,a)}))},a.prototype.listener=function(e,t,r,n,o,a){function s(e){var a=1,s=[];e.forEach(function(e){s.push(Object.assign({_key:e.key},e.val()))});var c=s;u.query.filter&&(c=u.query.filter(s,Object.assign(u.query,{page:t,size:r,orderBy:n}))),u.result&&c.length<u.result.total&&(u.cache={}),c.forEach(function(e,t){t+1>a*parseInt(r)&&a++;var o=i(a,r,n);u.cache[o]=u.cache[o]||[],u.cache[o][t-(a-1)*parseInt(r)]=e});var l=u.cache[i(t,r,n)];u.result.total=c.length,u.result.hits=0===u.result.total?[]:l,o(l),u.onData&&u.onData({total:c.length,hits:l})}var c,u=this,l=e*parseInt(r),p=n&&n.split("-")[1],d=p?p:n,f=p?"limitToLast":"limitToFirst";c=n?this.listRef.orderByChild(d.replace(".","/")):this.listRef.orderByKey();var h=""===this.query.equalTo?void 0:this.query.equalTo,g=""===this.query.startAt?void 0:this.query.startAt,m=""===this.query.endAt?void 0:this.query.endAt;void 0!==h?(isFinite(h)&&"boolean"!=typeof h&&(h=Number(h)),c=c.equalTo(h)):(isFinite(g)&&"boolean"!=typeof g&&(g=Number(g)),isFinite(m)&&"boolean"!=typeof m&&(m=Number(m)),c=void 0!==g?c.startAt(g):c,c=void 0!==m?c.endAt(m):c),"function"==typeof this.listenerCallback&&this.listRef.off("value",this.listenerCallback),this.listenerCallback=c[f](l).on("value",s,a)}}(),function(){"use strict";function e(e){return"?"==e.charAt(0)?!0:("/"==e.charAt(0)&&(e=e.substring(1)),!!l[e])}function t(e){var t="";for(var r in e){var n=e[r];for(var o in n){var a=n[o];if(null===a)return;var i="-"+a+" ",s=o+("all"===r)?"":"-"+r;switch(o){case"flex":"flex"===a&&(i=" ");break;case"flex-offset":case"flex-order":case"layout":case"layout-align":var c=a.x?"-"+a.x:"",u=a.y?"-"+a.y:"";i=c+u+" ";break;default:s=a?s+" ":"",i=""}t+=s+i}}return t}function r(r){r=r||{};var n,o=r.tag||"div",a=e(o),i=r.type;if(r.content){if(n=r.content,"text"===i)return n}else n="tag"===i?"<!--include-->":"";var s="";return r.id&&(s+='id="'+r.id+'" '),r.class&&(s+=' class="'+r.class+" "+t(r.layout)+'"'),r.style&&(s+=' style="'+r.style+'"'),r.attrs&&(s+=" "+r.attrs),r.ctrl&&(s+=' ng-controller="'+r.ctrl+" as "+(r.ctrlAs||"vm")+'"'),-1!==o.search("/")&&(a=!0),n="<--tag-- --custom-->"+(a?"":n+"<--endtag-->"),n=n.replace("--custom--",s),n=n.replace("--tag--",o),n=n.replace("--endtag--","/"+o)}function n(e){var t="";return e.forEach(function(e){var o=r(e);t+=o.replace("<!--include-->",e.divs?n(e.divs):"")}),t}function o(e,t){var o=Object.assign({},t||{});return o.content="<!--include-->",o.tag="md-content",o.style=o.style||"",r(o).replace("<!--include-->",n(e))}function a(e){return-1!==e.search("!--custom--")}function i(e){return-1!==e.search("!--tag--")&&-1!==e.search("!--endtag--")}var s=[null,0,5,10,15,20,25,30,33,35,40,45,50,55,60,65,66,70,75,80,85,90,95,100],c=["flex"].concat(s),u={breakpoints:["all","xs","gt-xs","sm","gt-sm","md","gt-md","lg","gt-lg","xl"],mediaQueries:["all","0~599","600~959","960~1279","1280~1919",">1920"],layout:{flex:c,"flex-offset":s,layout:[null,"row","column"],"layout-align":{x:[null,"start","center","end","space-around","space-between"],y:[null,"start","center","end","stretch"]}}},l={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1},p={layoutOptions:u,compile:n,compileAll:o,compileElement:r,isAttrsConfigurable:a,isTagConfigurable:i,buildLayoutClass:t};window._core=window._core||{},window._core.designService=p,"function"==typeof define&&define.amd?define(function(){return p}):"undefined"!=typeof module&&null!=module&&(module.exports=p)}(),function(){"use strict";function e(e){this.util=e}function t(e,t){this.esClient=e,this.searchData=t,this.cache={}}window._core=window._core||{},window._core.ElasticSearch=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&null!=module&&(module.exports=e),e.prototype.query=function(e){var t=this;return new Promise(function(r,n){function o(e,r,n){return t.util.database.request({paths:[e],data:n},[r]).then(function(e){return _core.encoding.decompress(e[0]).result})}var a=_core.encoding.md5(e),i=t.util.paths,s=i["query-request"]+"/"+a,c=i["query-cache"]+"/"+e.siteName+e.type,u=c+"/"+a;t.util.storage.getWithCache(u).then(function(a){a?r(a.result||a):t.util.database.getWithCache(u).then(function(t){t?r(t.result||t):o(s,u,e).then(r,n)})})})},e.prototype.pagination=function(e,r,n){return new t(this,e,r,n)},e.prototype.queryList=function(e){var r={siteName:_core.util.site.siteName,type:e.type};return void 0!==e.cate&&(r.cate=e.cate),void 0!==e.subCate&&(r.subCate=e.subCate),e.tag&&(r.tag=e.tag),e.queryString&&(r.queryString=e.queryString),e.query&&(r.query=e.query),new t(this,r)},t.prototype.get=function(e,t,r){var n=this,o=Object.assign({},this.searchData),a="p"+e+"l"+t+"s"+(r||"");return e=e||1,o.size=t,o.sort=r,o.from=parseInt(e-1)*parseInt(t),n.currentPage=e,n.size=t,this.cache[a]||(this.cache[a]=new Promise(function(e,t){n.esClient.query(o).then(e).catch(t)})),this.cache[a]},t.prototype.onReorder=function(e){this.searchData.sort=e,this.get(1,this.size,e)}}(),function(){function e(){}function t(e){if(Array.isArray(e))return e;var r=[],n={};for(var o in e)r.push(o);r.sort();for(var a=0;a<r.length;a++){var i=r[a];n[i]="object"==typeof e[i]&&null!==e[i]?t(e[i]):e[i]}return n}var r=new e;window._core=window._core||{},window._core.encoding=r,"function"==typeof define&&define.amd?define(function(){return r}):"undefined"!=typeof module&&null!=module&&(module.exports=r),e.prototype.LZString=function(){function e(e,t){if(!o[e]){o[e]={};for(var r=0;r<e.length;r++)o[e][e.charAt(r)]=r}return o[e][t]}var t=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={},a={compressToBase64:function(e){if(null==e)return"";var t=a._compress(e,6,function(e){return r.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:a._decompress(t.length,32,function(n){return e(r,t.charAt(n))})},compressToUTF16:function(e){return null==e?"":a._compress(e,15,function(e){return t(e+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:a._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=a.compress(e),r=new Uint8Array(2*t.length),n=0,o=t.length;o>n;n++){var i=t.charCodeAt(n);r[2*n]=i>>>8,r[2*n+1]=i%256}return r},decompressFromUint8Array:function(e){if(null===e||void 0===e)return a.decompress(e);for(var r=new Array(e.length/2),n=0,o=r.length;o>n;n++)r[n]=256*e[2*n]+e[2*n+1];var i=[];return r.forEach(function(e){i.push(t(e))}),a.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":a._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),a._decompress(t.length,32,function(r){return e(n,t.charAt(r))}))},compress:function(e){return a._compress(e,16,function(e){return t(e)})},_compress:function(e,t,r){if(null==e)return"";var n,o,a,i={},s={},c="",u="",l="",p=2,d=3,f=2,h=[],g=0,m=0;for(a=0;a<e.length;a+=1)if(c=e.charAt(a),Object.prototype.hasOwnProperty.call(i,c)||(i[c]=d++,s[c]=!0),u=l+c,Object.prototype.hasOwnProperty.call(i,u))l=u;else{if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(n=0;f>n;n++)g<<=1,m==t-1?(m=0,h.push(r(g)),g=0):m++;for(o=l.charCodeAt(0),n=0;8>n;n++)g=g<<1|1&o,m==t-1?(m=0,h.push(r(g)),g=0):m++,o>>=1}else{for(o=1,n=0;f>n;n++)g=g<<1|o,m==t-1?(m=0,h.push(r(g)),g=0):m++,o=0;for(o=l.charCodeAt(0),n=0;16>n;n++)g=g<<1|1&o,m==t-1?(m=0,h.push(r(g)),g=0):m++,o>>=1}p--,0==p&&(p=Math.pow(2,f),f++),delete s[l]}else for(o=i[l],n=0;f>n;n++)g=g<<1|1&o,m==t-1?(m=0,h.push(r(g)),g=0):m++,o>>=1;p--,0==p&&(p=Math.pow(2,f),f++),i[u]=d++,l=String(c)}if(""!==l){if(Object.prototype.hasOwnProperty.call(s,l)){if(l.charCodeAt(0)<256){for(n=0;f>n;n++)g<<=1,m==t-1?(m=0,h.push(r(g)),g=0):m++;for(o=l.charCodeAt(0),n=0;8>n;n++)g=g<<1|1&o,m==t-1?(m=0,h.push(r(g)),g=0):m++,o>>=1}else{for(o=1,n=0;f>n;n++)g=g<<1|o,m==t-1?(m=0,h.push(r(g)),g=0):m++,o=0;for(o=l.charCodeAt(0),n=0;16>n;n++)g=g<<1|1&o,m==t-1?(m=0,h.push(r(g)),g=0):m++,o>>=1}p--,0==p&&(p=Math.pow(2,f),f++),delete s[l]}else for(o=i[l],n=0;f>n;n++)g=g<<1|1&o,m==t-1?(m=0,h.push(r(g)),g=0):m++,o>>=1;p--,0==p&&(p=Math.pow(2,f),f++)}for(o=2,n=0;f>n;n++)g=g<<1|1&o,m==t-1?(m=0,h.push(r(g)),g=0):m++,o>>=1;for(;;){if(g<<=1,m==t-1){h.push(r(g));break}m++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:a._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,r,n){var o,a,i,s,c,u,l,p,d=[],f=4,h=4,g=3,m="",y=[],w={val:n(0),position:r,index:1};for(a=0;3>a;a+=1)d[a]=a;for(s=0,u=Math.pow(2,2),l=1;l!=u;)c=w.val&w.position,w.position>>=1,0==w.position&&(w.position=r,w.val=n(w.index++)),s|=(c>0?1:0)*l,l<<=1;switch(o=s){case 0:for(s=0,u=Math.pow(2,8),l=1;l!=u;)c=w.val&w.position,w.position>>=1,0==w.position&&(w.position=r,w.val=n(w.index++)),s|=(c>0?1:0)*l,l<<=1;p=t(s);break;case 1:for(s=0,u=Math.pow(2,16),l=1;l!=u;)c=w.val&w.position,w.position>>=1,0==w.position&&(w.position=r,w.val=n(w.index++)),s|=(c>0?1:0)*l,l<<=1;p=t(s);break;case 2:return""}for(d[3]=p,i=p,y.push(p);;){if(w.index>e)return"";for(s=0,u=Math.pow(2,g),l=1;l!=u;)c=w.val&w.position,w.position>>=1,0==w.position&&(w.position=r,w.val=n(w.index++)),s|=(c>0?1:0)*l,l<<=1;switch(p=s){case 0:for(s=0,u=Math.pow(2,8),l=1;l!=u;)c=w.val&w.position,w.position>>=1,0==w.position&&(w.position=r,w.val=n(w.index++)),s|=(c>0?1:0)*l,l<<=1;d[h++]=t(s),p=h-1,f--;break;case 1:for(s=0,u=Math.pow(2,16),l=1;l!=u;)c=w.val&w.position,w.position>>=1,0==w.position&&(w.position=r,w.val=n(w.index++)),s|=(c>0?1:0)*l,l<<=1;d[h++]=t(s),p=h-1,f--;break;case 2:return y.join("")}if(0==f&&(f=Math.pow(2,g),g++),d[p])m=d[p];else{if(p!==h)return null;m=i+i.charAt(0)}y.push(m),d[h++]=i+m.charAt(0),f--,i=m,0==f&&(f=Math.pow(2,g),g++)}}};return a}(),e.prototype.MD5=function(){function e(e,t){var i=e[0],s=e[1],c=e[2],u=e[3];i=r(i,s,c,u,t[0],7,-680876936),u=r(u,i,s,c,t[1],12,-389564586),c=r(c,u,i,s,t[2],17,606105819),s=r(s,c,u,i,t[3],22,-1044525330),i=r(i,s,c,u,t[4],7,-176418897),u=r(u,i,s,c,t[5],12,1200080426),c=r(c,u,i,s,t[6],17,-1473231341),s=r(s,c,u,i,t[7],22,-45705983),i=r(i,s,c,u,t[8],7,1770035416),u=r(u,i,s,c,t[9],12,-1958414417),c=r(c,u,i,s,t[10],17,-42063),s=r(s,c,u,i,t[11],22,-1990404162),i=r(i,s,c,u,t[12],7,1804603682),u=r(u,i,s,c,t[13],12,-40341101),c=r(c,u,i,s,t[14],17,-1502002290),s=r(s,c,u,i,t[15],22,1236535329),i=n(i,s,c,u,t[1],5,-165796510),u=n(u,i,s,c,t[6],9,-1069501632),c=n(c,u,i,s,t[11],14,643717713),s=n(s,c,u,i,t[0],20,-373897302),i=n(i,s,c,u,t[5],5,-701558691),u=n(u,i,s,c,t[10],9,38016083),c=n(c,u,i,s,t[15],14,-660478335),s=n(s,c,u,i,t[4],20,-405537848),i=n(i,s,c,u,t[9],5,568446438),u=n(u,i,s,c,t[14],9,-1019803690),c=n(c,u,i,s,t[3],14,-187363961),s=n(s,c,u,i,t[8],20,1163531501),i=n(i,s,c,u,t[13],5,-1444681467),u=n(u,i,s,c,t[2],9,-51403784),c=n(c,u,i,s,t[7],14,1735328473),s=n(s,c,u,i,t[12],20,-1926607734),i=o(i,s,c,u,t[5],4,-378558),u=o(u,i,s,c,t[8],11,-2022574463),c=o(c,u,i,s,t[11],16,1839030562),s=o(s,c,u,i,t[14],23,-35309556),i=o(i,s,c,u,t[1],4,-1530992060),u=o(u,i,s,c,t[4],11,1272893353),c=o(c,u,i,s,t[7],16,-155497632),s=o(s,c,u,i,t[10],23,-1094730640),i=o(i,s,c,u,t[13],4,681279174),u=o(u,i,s,c,t[0],11,-358537222),c=o(c,u,i,s,t[3],16,-722521979),s=o(s,c,u,i,t[6],23,76029189),i=o(i,s,c,u,t[9],4,-640364487),u=o(u,i,s,c,t[12],11,-421815835),c=o(c,u,i,s,t[15],16,530742520),s=o(s,c,u,i,t[2],23,-995338651),i=a(i,s,c,u,t[0],6,-198630844),u=a(u,i,s,c,t[7],10,1126891415),c=a(c,u,i,s,t[14],15,-1416354905),s=a(s,c,u,i,t[5],21,-57434055),i=a(i,s,c,u,t[12],6,1700485571),u=a(u,i,s,c,t[3],10,-1894986606),c=a(c,u,i,s,t[10],15,-1051523),s=a(s,c,u,i,t[1],21,-2054922799),i=a(i,s,c,u,t[8],6,1873313359),u=a(u,i,s,c,t[15],10,-30611744),c=a(c,u,i,s,t[6],15,-1560198380),s=a(s,c,u,i,t[13],21,1309151649),i=a(i,s,c,u,t[4],6,-145523070),u=a(u,i,s,c,t[11],10,-1120210379),c=a(c,u,i,s,t[2],15,718787259),s=a(s,c,u,i,t[9],21,-343485551),e[0]=p(i,e[0]),e[1]=p(s,e[1]),e[2]=p(c,e[2]),e[3]=p(u,e[3])}function t(e,t,r,n,o,a){return t=p(p(t,e),p(n,a)),p(t<<o|t>>>32-o,r)}function r(e,r,n,o,a,i,s){return t(r&n|~r&o,e,r,a,i,s)}function n(e,r,n,o,a,i,s){return t(r&o|n&~o,e,r,a,i,s)}function o(e,r,n,o,a,i,s){return t(r^n^o,e,r,a,i,s)}function a(e,r,n,o,a,i,s){return t(n^(r|~o),e,r,a,i,s)}function i(t){var r,n=t.length,o=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=t.length;r+=64)e(o,s(t.substring(r-64,r)));t=t.substring(r-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<t.length;r++)a[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(a[r>>2]|=128<<(r%4<<3),r>55)for(e(o,a),r=0;16>r;r++)a[r]=0;return a[14]=8*n,e(o,a),o}function s(e){var t,r=[];for(t=0;64>t;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function c(e){for(var t="",r=0;4>r;r++)t+=d[e>>8*r+4&15]+d[e>>8*r&15];return t}function u(e){for(var t=0;t<e.length;t++)e[t]=c(e[t]);return e.join("")}function l(e){return u(i(e))}function p(e,t){return e+t&4294967295}var d="0123456789abcdef".split("");return"5d41402abc4b2a76b9719d911017c592"!=l("hello")&&(p=function(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}),l}(),e.prototype.compress=function(e){return this.LZString.compressToUTF16(JSON.stringify(e))},e.prototype.decompress=function(e){if(!e||!e.compressed)return e;var t,r;return e.compressed&&(t=JSON.parse(this.LZString.decompressFromUTF16(e.compressed))),"object"!=typeof t||Array.isArray(t)?r=t:(r=Object.assign({},e,t),delete r.compressed),r},e.prototype.md5=function(e){if("string"==typeof e)return this.MD5(e);var r=t(e);return this.MD5(JSON.stringify(r))}}(),function(){"use strict";function e(e){this.util=e}function t(e,t){return new Promise(function(n){var o=0,a=function(){o++,o<t.length?r(e,t[o],a):n()};t[0]&&r(e,t[0],a)})}function r(e,t,r){switch(e){case"style":var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=t,n.onload=r,n.onerror=r,document.head.appendChild(n);break;case"script":var o=document.createElement("script");o.type="text/javascript",o.onload=r,o.onerror=r,document.body.appendChild(o),o.src=t}}function n(e,t){function r(e){if("string"==typeof e){var t=p.cloneNode(!1);t.text=e,d.parentNode.insertBefore(t,d)}else e.apply(window)}function n(e,t){f[e]=t}function o(e){n(e,null),m=e+1}function a(){if(t)for(var e,n=!0,a=m,i=f.length;i>a&&n;)e=f[a],void 0!==e&&null!==e?(r(e),o(a),a+=1):n=!1}function i(){if(f.length){var e,t=f.pop();"string"==typeof t?(e=p.cloneNode(!0),e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){(!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e=void 0,i())},d.parentNode.insertBefore(e,d)):(t.apply(window),i())}}function s(e,t){return function(){n(t,e.responseText),g[t](e.responseText),a(),e=void 0}}function c(){var t;e.forEach(function(e){t=y(e),t.onload=s(t,f.length),h[f.length]=new Promise(function(e){g[f.length]=e}),n(f.length,null),t.send()})}function u(){f.push(Array.prototype.slice.call(e,0).reverse()),i()}var l=window.document,p=l.createElement("script"),d=l.getElementsByTagName("script")[0],f=[],h=[],g=[],m=0,y=function(){var e,t;return window.XMLHttpRequest&&(e=new window.XMLHttpRequest,"withCredentials"in e?t=function(t){return e=new window.XMLHttpRequest,e.open("get",t,!0),e}:window.XDomainRequest&&(t=function(t){return e=new window.XDomainRequest,e.open("get",t),e})),t}();(y?c:u)(),this.promise=Promise.all(h),this.exec=function(){t||this.promise.then(function(e){e.forEach(function(e){r(e)})})}}window._core=window._core||{},window._core.Loader=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&null!=module&&(module.exports=e);var o={core:{js:["presets/core/scripts/vendor.js","presets/core/scripts/vendor.js"],css:[]}},a="https://cdnjs.cloudflare.com/ajax/libs",i="https://ajax.googleapis.com/ajax/libs";o.ng1={js:[a+"/jquery/2.2.4/jquery.min.js",i+"/angularjs/1.5.7/angular.min.js",i+"/angularjs/1.5.7/angular-animate.min.js",i+"/angularjs/1.5.7/angular-aria.min.js",i+"/angularjs/1.5.7/angular-cookies.min.js",i+"/angularjs/1.5.7/angular-messages.min.js",i+"/angularjs/1.5.7/angular-sanitize.min.js",a+"/angular-ui-router/1.0.0-beta.3/angular-ui-router.min.js",a+"/angular-translate/2.12.1/angular-translate.min.js",a+"/angular-translate/2.12.1/angular-translate-loader-partial/angular-translate-loader-partial.min.js",a+"/angular-translate/2.12.1/angular-translate-storage-cookie/angular-translate-storage-cookie.min.js",a+"/angular-translate/2.12.1/angular-translate-storage-local/angular-translate-storage-local.min.js",a+"/angulartics/1.2.1/angulartics.min.js",a+"/angulartics-google-analytics/0.2.1/angulartics-ga.min.js",a+"/oclazyload/1.0.9/ocLazyLoad.min.js"],css:[]},o.ngMaterial={js:o.ng1.js.concat([i+"/angular_material/1.1.1/angular-material.min.js",a+"/angular-material-data-table/0.10.9/md-data-table.min.js"]),css:[i+"/angular_material/1.1.1/angular-material.min.css",a+"/angular-material-data-table/0.10.9/md-data-table.min.css"]},e.prototype.loadPreset=function(e){var r=this;return new Promise(function(){var n=e||{},a=n.preset&&n.preset.id?n.preset.id:"ng1",i=o[a],s=[],c=function(e){s.push("string"==typeof e?e:e._src||e.src)},u=function(e){e.js&&e.js.forEach(function(e){s.push("presets/"+a+"/plugins/"+e+".js")}),e.css&&e.styles.forEach(function(){s.push("presets/"+a+"/plugins/"+ppath+".css")})};(n.scripts_1||[]).forEach(c),i.js.forEach(c),(n.plugins||[]).forEach(u),(n.scripts_2||[]).forEach(c),s.push("presets/"+a+"/scripts/main.js");var l=i.css.concat(["presets/"+a+"/styles/vendor.css","presets/"+a+"/styles/main.css"]);(n.styles_1||[]).forEach(function(e){l.push(e._src||e.src)}),r.loadScripts(s,!0),t("style",l)})},e.prototype.getExternalSourceUrls=function(e,t){var r=this,n=[],o=e||[];return o.forEach(function(e){var o=e.src||e.href;if(-1!==o.search("//"))n.push(Promise.resolve(o));else{var a="/"===o.charAt(0)?"file-root-path?path="+o:"file-path?path="+o,i=r.util.storage.ref(a,{siteName:t||r.util.site.siteName}).getDownloadURL();n.push(i)}}),Promise.all(n)},e.prototype.getExternalSourceFromHtml=function(e){function t(e){var t="innerHtml"===e?">([\\s\\S]*)<":"<[\\s\\S]*"+e+"[\\s\\S]*?=[\\s\\S]*?['\"]([\\s\\S]*?)['\"][\\s\\S]*?>";return new RegExp(t)}var r={},n=e+"";return r.scriptRegEx=/<script[^>]*>[\s\S]*?<\/script>/gm,r.cssRegEx=new RegExp("<link[^>]*.css[^>]*>","gm"),r.scriptAttrs=["src","async","defer","type","innerHtml"],r.cssAttrs=["type","href","rel","media"],r.sources=[],["script","css"].forEach(function(o){r[o]=[],(e.match(r[o+"RegEx"])||[]).forEach(function(e,a){r[o][a]={},r[o+"Attrs"].forEach(function(n){r[o][a]["href"===n?"src":n]=(e.match(t(n))||[])[1]}),"script"===o&&(r[o][a].defer=!0),r.sources.push(r[o][a]),n=n.replace(e,"")})}),{script:r.script,css:r.css,sources:r.sources,html:n}},e.prototype.loadScripts=function(e,t){return new n(e,t)}}(),window._core=window._core||{},Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var r=arguments[t];if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}),window._core.isNumeric=isNumeric,function(){"use strict";function e(e){this.util=e,this.siteName="",this.domain="",this.cache={};var r=this;window.onhashchange=function(){var e=t();e&&e!==r.siteName&&location.reload()}}function t(){var e=/.*?\/\/.*?(\/preview\/#!\/preview\/|\/#!\/test\/|\/#!\/|\/)(.*?)\//,t=location.href.match(e),r=t?t[2]:"";return r&&-1===r.search("#")?r:""}window._core=window._core||{},window._core.SiteUtil=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&null!=module&&(module.exports=e),e.prototype.setSiteName=function(e){this.siteName=e},e.prototype.getSiteName=function(){var e=this;return this.siteName?Promise.resolve(this.siteName):"localhost"===location.hostname||-1!==location.hostname.search("firebaseapp.com")?(this.siteName=t(),Promise.resolve(this.siteName)):(this.domain=location.host,new Promise(function(t){e.util.database.queryRef("sites",{params:{type:"list"},orderBy:"Child: domain",equalTo:location.hostname,limitToFirst:1}).once("child_added",function(r){var n=r.val();e.siteName=n.siteName,t(n.siteName)})}))},e.prototype.getSitePreload=function(){var e=this;return new Promise(function(t,r){e.getSiteName().then(function(n){e.cache[n]=e.cache[n]||{},e.cache[n].preload?t(e.cache[n].preload):e.util.storage.getWithCache("site-config-preload?siteName="+n).then(function(r){e.cache[n].preload=r,t(r)}).catch(r)})})},e.prototype.getPageName=function(){if(this.pageName)return this.pageName;if(-1!==location.href.search("localhost")||-1!==location.href.search("firebaseapp.com")){var e=/.*?\/\/.*?(\/#!\/|\/).*?\/(.*?)\//,t=location.href.match(e);return this.pageName=t?t[2]:"",this.pageName}var r=location.href;return r.split("//")[1].split("/")[1]},e.prototype.loadPage=function(e,t){var r=this;return new Promise(function(n,o){r.getSiteName().then(function(a){var i=e||a;r.cache[i]=r.cache[i]||{},r.cache[i].pageCache=r.cache[i].pageCache||{};var s=t||r.getPageName();r.cache[i].pageCache[s]?n(r.cache[i].pageCache[s]):r.util.storage.getWithCache("page?type=detail&id="+s+"&siteName="+i).then(function(e){var t=e||{},o=t.sources||[];r.util.loader.getExternalSourceUrls(o,i).then(function(e){o.forEach(function(t,r){t.src?o[r].src=e[r]:t.href&&(o[r].href=e[r])}),t.sources=o,n(t),r.cache[i].pageCache[s]=t})}).catch(o)})})},e.prototype.changeFavicon=function(e){var t=document.createElement("link"),r=document.getElementById("dynamic-favicon");t.id="dynamic-favicon",t.rel="shortcut icon",t.href=e,r&&document.head.removeChild(r),document.head.appendChild(t)},e.prototype.changeTitle=function(e){document.title=e}}(),function(){"use strict";function StorageUtil(e){this.util=e}function getRandomDownloadUrl(e){return Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e}function getId(e){return e.split(".js")[0]}function getDownloadUrls(e,t){var r=[],n=this;return t.forEach(function(t,o){r[o]=-1===t.search("//")?n.ref("file-path?siteName="+e+"&path="+t).getDownloadURL():Promise.resolve(t)}),Promise.all(r)}function loadJsFromUrl(e,t){var r=document.createElement("script");r.type="text/javascript",r.src=e,t&&(r.id=t),document.body.appendChild(r)}function getFBS(e,t){window._core.usage.useBandwidth(e,"storage");var r=_core.encoding.decompress(e),n=getId(r.path);_core._storageResolves[n](r.value),delete _core._storageResolves[n],t&&t(r.value);var o=document.getElementById(n);o.outerHTML="",_core.syncTime().then(function(e){localStorage&&(r.cachedTime=e(),localStorage.setItem(n,_core.encoding.compress(r)))})}window._core=window._core||{},window._core.StorageUtil=StorageUtil,"function"==typeof define&&define.amd?define(function(){return StorageUtil}):"undefined"!=typeof module&&null!=module&&(module.exports=StorageUtil),StorageUtil.prototype.update=function(targetRef,value,onState,option){var self=this;return new Promise(function(resolve,reject){var _targetRef="string"==typeof targetRef?firebase.storage(self.util.app).ref(self.util.parseRefUrl(targetRef,option,!0)):targetRef,_path=_targetRef.fullPath,id=getId(_path),_onState="function"==typeof onState?onState:function(){},isCompress=!0,_value={path:_path,compressed:_core.encoding.compress({value:value})},_valStr=JSON.stringify(_value),dataString;
    try{eval("(function(){})("+_valStr+")")}catch(err){isCompress=!1}isCompress||(_valStr=JSON.stringify({path:_path,value:value})),dataString="_getFBS("+_valStr+");";var data=new Blob([dataString],{type:"text/javascript"});return storageReload[id]=!0,_targetRef.put(data).on("state_changed",_onState,reject,resolve)})},StorageUtil.prototype.getWithCache=function(e,t){var r="string"==typeof e?firebase.storage(this.util.app).ref(this.util.parseRefUrl(e,t,!0)):e,n=getId(r.fullPath);return storagePromises[n]&&!storageReload[n]?storagePromises[n]:(storagePromises[n]=new Promise(function(e,t){_core._storageResolves[n]=e,r.getMetadata().catch(function(r){"storage/object-not-found"===r.code?e(null):t(r)}).then(function(t){if(t){var r=getRandomDownloadUrl(t.downloadURLs),o=new Date(t.updated).getTime();if(localStorage&&localStorage.getItem(n)){var a=localStorage.getItem(n),i=_core.encoding.decompress({compressed:a});o<i.cachedTime?(e(i.value),console.log("from cache")):loadJsFromUrl(r,n)}else loadJsFromUrl(r,n)}})}),storageReload[n]=!1,storagePromises[n])},StorageUtil.prototype.ref=function(e,t){var r=t||{};return firebase.storage(this.util.app).ref(this.util.parseRefUrl(e,r,!0))},StorageUtil.prototype.getDownloadUrls=getDownloadUrls;var storagePromises={},storageReload={};_core._storageResolves={},window._getFBS=getFBS,window._getGetFBS=function(){return getFBS}}(),function(){"use strict";function e(){return r}window._core=window._core||{},window._core.syncTime=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&null!=module&&(module.exports=e);var t,r=new Promise(function(e){var r,n=new XMLHttpRequest,o=(new Date).getTime();n.open("HEAD",document.location,!1),n.onreadystatechange=function(){if(4==n.readyState){var a=(new Date).getTime()-o,i=n.getResponseHeader("DATE");r=new Date(i),r.setMilliseconds(r.getMilliseconds()+a/2),t=r-new Date,window._core.getSyncTime=function(){return t?(new Date).getTime()+t:void 0},e(window._core.getSyncTime)}},n.send(null)})}(),function(){"use strict";function e(e){this.util=e,this.storageUsage=0,this.databaseUsage=0}window._core=window._core||{},window._core.Usage=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&null!=module&&(module.exports=e),e.prototype.useBandwidth=function(e,t){this[t+"Usage"]+=window._core.isNumeric(e)?e:encodeURI(JSON.stringify(e)).split(/%..|./).length-1,console.log(t+" usage:",this[t+"Usage"])},e.prototype.init=function(){window._core.usage=this}}(),function(){"use strict";_core.util=new _core.AppUtil,_core.util.site.getSitePreload().then(function(e){var t=e||{};t.analystics&&_core.util.analytics.applyTracker(t.analystics),_core.util.loader.loadPreset(t)}),_core.util.site.loadPage().then(function(e){console.log(e)})}();
