<div class="padded-content-page">
    <md-content firebase="products/{{vm.id}}"
         layout="row" layout-xs="column" layout-fill layout-wrap layout-margin>

        <md-card class="md-whiteframe-2dp" flex-gt-xs="40">
            <img class="md-card-image" ng-src="{{ref.$value.image}}">
        </md-card>
        <md-card class="md-whiteframe-2dp" flex-gt-xs="40">
            <md-card-content layout-align="center center">
                <div class="content-padded">
                    <h1 class="md-headline">{{ref.$value.itemName}}</h1>
                    <p>
                        {{ref.$value.description}}
                    </p>
                </div>
            </md-card-content>
        </md-card>

        <!-- style="min-width: 15em; flex:1 1 8em" is used to fix safari's flex wrapping bug-->
        <md-card class="md-whiteframe-2dp" flex style="min-width: 8em; flex:1 1 8em">
            <md-card-content layout-align="center center">
                <md-input-container>
                    <md-select ng-repeat="(optName, optValue) in ref.$value.options" ng-model="vm.selectedOption[optName]">
                        <label>{{optName}}</label>
                        <md-option ng-repeat="option in optValue" value="{{option}}">
                            {{option}}
                        </md-option>
                    </md-select>
                </md-input-container>

                <p>
                    Price:{{ref.$value.price|currency : '$' : 2}}
                </p>
                <md-divider></md-divider>
                <ngcart-addtocart id="{{ ref.$value.itemId }}"
                                  ng-if="ref.$value.available!==false"
                                  name="{{ ref.$value.itemName }}"
                                  price="{{ ref.$value.price }}"
                                  quantity="{{ref.$value.quantity||1}}"
                                  quantity-max="30"
                                  data="vm.selectedOption">Add</ngcart-addtocart>
                {{ref.$value.status}}
            </md-card-content>
        </md-card>

        <md-card class="md-whiteframe-2dp" flex-gt-xs="100" layout-padding>
            <div disqus="vm.id"></div>
        </md-card>
    </md-content>

</div>

